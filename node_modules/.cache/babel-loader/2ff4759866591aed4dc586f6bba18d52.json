{"ast":null,"code":"// All redux functions that relate to leads\nimport { FETCH_LEADS, START_FETCH_LEADS, START_FETCH_LEADS_AND_LIST, SUCCESS_MESSAGE, ADD_LIST, ADD_METRIC_LEADS } from './types';\n\nconst uuidv1 = require(\"uuid/v1\");\n\nexport function thunkFetchLeads(domainName, history) {\n  return function (dispatch) {\n    dispatch({\n      type: START_FETCH_LEADS\n    });\n    fetch(\"https://api.hunter.io/v2/domain-search?domain=\".concat(domainName, \"&limit=100&api_key=7ca084937e5e049696b7bb64c10366c3d077c650\")).then(res => res.json()).then(result => {\n      console.log(\"HUNTER LEADS\", result);\n      dispatch({\n        type: FETCH_LEADS,\n        id: uuidv1(),\n        leads: result.data\n      });\n      history.push(\"/results\");\n    });\n  };\n} // ? creating a new lead instance of the one the user saved and creating the association between list and lead\n\nexport function addLead(selected, company, website, listId, newListName, userId) {\n  return function (dispatch) {\n    // const token = localStorage.token;\n    dispatch({\n      type: START_FETCH_LEADS_AND_LIST\n    });\n    fetch(\"http://localhost:3000/api/v1/leads\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        selected,\n        company: company,\n        website: website\n      })\n    }).then(res => res.json()).then(data => {\n      const leadsData = data;\n\n      if (listId) {\n        data.forEach(lead => {\n          fetch(\"http://localhost:3000/api/v1/leadlists\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Accept: \"application/json\"\n            },\n            body: JSON.stringify({\n              list_id: listId,\n              lead_id: lead.id\n            })\n          }).then(res => res.json()) // .then(data => {\n          //   dispatch({ type: SUCCESS_MESSAGE, message: data.message });\n          // })\n          .catch(err => console.log(err));\n        });\n      } else {\n        fetch(\"http://localhost:3000/api/v1/lists\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\"\n          },\n          body: JSON.stringify({\n            name: newListName,\n            user_id: userId\n          })\n        }).then(res => res.json()).then(data => {\n          dispatch({\n            type: ADD_LIST,\n            list: data\n          });\n          leadsData.forEach(lead => {\n            fetch(\"http://localhost:3000/api/v1/leadlists\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\"\n              },\n              body: JSON.stringify({\n                list_id: data.id,\n                lead_id: lead.id\n              })\n            }) // end of the fetch\n            .then(res => res.json()) // .then(data => {\n            //   dispatch({ type: SUCCESS_MESSAGE, message: data.message });\n            // })\n            .catch(err => console.log(err));\n          });\n        }).catch(err => console.log(err));\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function metricLeads(leads, history, title) {\n  return function (dispatch) {\n    dispatch({\n      type: ADD_METRIC_LEADS,\n      leads,\n      title\n    });\n    history.push('/detailed');\n  };\n}","map":{"version":3,"sources":["/Users/gracetan/Development/module-projects/module-five-project/project-prospect-frontend/src/actions/leads.js"],"names":["FETCH_LEADS","START_FETCH_LEADS","START_FETCH_LEADS_AND_LIST","SUCCESS_MESSAGE","ADD_LIST","ADD_METRIC_LEADS","uuidv1","require","thunkFetchLeads","domainName","history","dispatch","type","fetch","then","res","json","result","console","log","id","leads","data","push","addLead","selected","company","website","listId","newListName","userId","method","headers","Accept","body","JSON","stringify","leadsData","forEach","lead","list_id","lead_id","catch","err","name","user_id","list","metricLeads","title"],"mappings":"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","sourcesContent":["// All redux functions that relate to leads\n\nimport { FETCH_LEADS, START_FETCH_LEADS, START_FETCH_LEADS_AND_LIST, SUCCESS_MESSAGE, ADD_LIST, ADD_METRIC_LEADS } from './types'\n\nconst uuidv1 = require(\"uuid/v1\");\n\n\nexport function thunkFetchLeads(domainName, history) {\n  return function(dispatch) {\n    dispatch({ type: START_FETCH_LEADS });\n\n    fetch(\n      `https://api.hunter.io/v2/domain-search?domain=${domainName}&limit=100&api_key=7ca084937e5e049696b7bb64c10366c3d077c650`\n    )\n      .then(res => res.json())\n      .then(result => {\n        console.log(\"HUNTER LEADS\", result)\n        dispatch({ type: FETCH_LEADS, id: uuidv1(), leads: result.data });\n        history.push(\"/results\");\n      });\n  };\n}\n\n// ? creating a new lead instance of the one the user saved and creating the association between list and lead\nexport function addLead(\n  selected,\n  company,\n  website,\n  listId,\n  newListName,\n  userId\n) {\n  return function(dispatch) {\n    // const token = localStorage.token;\n    dispatch({ type: START_FETCH_LEADS_AND_LIST });\n\n    fetch(\"http://localhost:3000/api/v1/leads\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        selected,\n        company: company,\n        website: website\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        const leadsData = data;\n        if (listId) {\n          data.forEach(lead => {\n            fetch(\"http://localhost:3000/api/v1/leadlists\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\"\n              },\n              body: JSON.stringify({\n                list_id: listId,\n                lead_id: lead.id\n              })\n            })\n              .then(res => res.json())\n              // .then(data => {\n              //   dispatch({ type: SUCCESS_MESSAGE, message: data.message });\n              // })\n              .catch(err => console.log(err));\n          });\n        } else {\n          fetch(\"http://localhost:3000/api/v1/lists\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Accept: \"application/json\"\n            },\n            body: JSON.stringify({\n              name: newListName,\n              user_id: userId\n            })\n          })\n            .then(res => res.json())\n            .then(data => {\n              dispatch({ type: ADD_LIST, list: data });\n              leadsData.forEach(lead => {\n                fetch(\"http://localhost:3000/api/v1/leadlists\", {\n                  method: \"POST\",\n                  headers: {\n                    \"Content-Type\": \"application/json\",\n                    Accept: \"application/json\"\n                  },\n                  body: JSON.stringify({\n                    list_id: data.id,\n                    lead_id: lead.id\n                  })\n                }) // end of the fetch\n                  .then(res => res.json())\n                  // .then(data => {\n                  //   dispatch({ type: SUCCESS_MESSAGE, message: data.message });\n                  // })\n                  .catch(err => console.log(err));\n              });\n            })\n            .catch(err => console.log(err));\n        }\n      })\n      .catch(err => console.log(err));\n  };\n}\n\nexport function metricLeads(leads, history, title) {\n  return function(dispatch) {\n    dispatch({type: ADD_METRIC_LEADS, leads, title})\n      history.push('/detailed')\n  }\n}\n"]},"metadata":{},"sourceType":"module"}