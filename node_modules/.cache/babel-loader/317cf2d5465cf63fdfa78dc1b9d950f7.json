{"ast":null,"code":"export const FETCH_CATEGORIES = \"FETCH_CATEGORIES\";\nexport const START_FETCH_CATEGORIES = \"START_FETCH_CATEGORIES\";\nexport const START_FETCH_LEADS = \"START_FETCH_LEADS\";\nexport const START_FETCH_LEADS_AND_LIST = \"START_FETCH_LEADS_AND_LIST\";\nexport const FETCH_LEADS = \"FETCH_LEADS\";\nexport const START_FETCH_LISTS = \"FETCH_LISTS\";\nexport const START_FETCH_LEADNOTES = \"START_FETCH_LEADNOTES\";\nexport const FETCH_LISTS = \"FETCH_LISTS\";\nexport const FETCH_LEADNOTES = \"FETCH_LEADNOTES\";\nexport const ADD_LIST = \"ADD_LIST\";\nexport const LOGIN_USER = \"LOGIN_USER\";\nexport const LOGOUT_USER = \"LOGOUT_USER\";\nexport const START_DELETE_LIST = \"START_DELETE_LIST\";\nexport const START_DELETE_LEAD = \"START_DELETE_LIST\";\nexport const DELETE_LIST = \"DELETE_LIST\";\nexport const DELETE_LISTLEAD = \"DELETE_LISTLEAD\";\nexport const FETCH_LIST_BY_ID = \"FETCH_LIST_BY_ID\";\nexport const ADD_LEAD_NOTE = \"ADD_LEAD_NOTE\";\nexport const ACTION_SUCCESS = \"ACTION_SUCCESS\";\nexport const FETCH_LIST_WITH_LEADNOTES = \"FETCH_LIST_WITH_LEADNOTES\";\nexport const COMPLETE_FETCH_LEADS_AND_LIST = \"COMPLETE_FETCH_LEADS_AND_LIST\";\nexport const FETCH_ERROR = \"FETCH_ERROR\";\nexport const SUCCESS_MESSAGE = \"SUCCESS_MESSAGE\";\nexport const CLEAR_MESSAGE = \"CLEAR_MESSAGE\"; // export const START_DELETE_LEADLIST = \"START_DELETE_LEADLIST\";\n\nconst uuidv1 = require(\"uuid/v1\"); // LOGIN\n\n\nexport function loginUser(user) {\n  return {\n    type: \"LOGIN_USER\",\n    user\n  };\n}\nexport function logoutUser() {\n  return {\n    type: \"LOGOUT_USER\"\n  };\n}\nexport function currentUser(history) {\n  return dispatch => {\n    const token = localStorage.token;\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \".concat(token)\n      }\n    }; // dispatch with \"loading\" current user\n\n    return fetch(\"http://localhost:3000/api/v1/current_user\", reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        //handle error\n        history.push(\"/\");\n        console.log(\"current user\", data.error);\n      } else {\n        dispatch(loginUser({\n          user: data.user\n        }));\n      }\n    });\n  };\n} // ? testing\n\nexport function loadUser(loadingCb, successCb, failCb) {\n  return function (dispatch) {\n    loadingCb();\n    const token = localStorage.token;\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \".concat(token)\n      }\n    }; // dispatch with \"loading\" current user\n\n    return fetch(\"http://localhost:3000/api/v1/current_user\", reqObj).then(resp => resp.json()).then(data => {\n      dispatch({\n        type: \"ACTION_SUCCESS\",\n        user: data.user\n      });\n      successCb();\n    }).catch(err => {\n      failCb();\n    });\n  };\n}\nexport function login(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch(\"http://localhost:3000/api/v1/login\", reqObj).then(resp => resp.json()).then(data => {\n      if (data.message) {\n        //handle error case\n        console.log(\"login error\", data.message);\n      } else {\n        console.log(\"fetch login\", data);\n        localStorage.token = data.token;\n        dispatch(loginUser({\n          user: data.user\n        }));\n        dispatch({\n          type: \"CLEAR_MESSAGE\"\n        });\n        history.push(\"/\");\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function registerUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch(\"http://localhost:3000/api/v1/auth\", reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        //handle error case\n        console.log(data.error);\n      } else {\n        localStorage.token = data.token;\n        dispatch(loginUser(data.user));\n        history.push(\"/\");\n      }\n    });\n  };\n} ////LOGIN\n\nexport function thunkFetchCategories() {\n  return function (dispatch) {\n    dispatch({\n      type: START_FETCH_CATEGORIES\n    });\n    fetch(\"http://localhost:3000/api/v1/categories\").then(res => res.json()).then(data => {\n      dispatch({\n        type: FETCH_CATEGORIES,\n        categories: data\n      });\n    });\n  };\n} // ? Invoked on App.js and fetches all lists in array format with leads data\n// ? Used to populate the Dashboard.js\n\nexport function thunkFetchLists(id) {\n  return function (dispatch) {\n    // dispatch({ type: START_FETCH_LISTS });\n    fetch(\"http://localhost:3000/api/v1/lists/show_lists/\".concat(id)).then(res => res.json()).then(data => {\n      dispatch({\n        type: FETCH_LISTS,\n        lists: data\n      });\n    });\n  };\n} // ? Search by id of the LIST and return a list with leads and leadnote data\n// ? Used to populate LeadList.js\n\nexport function thunkFetchListById(id, history) {\n  return function (dispatch) {\n    fetch(\"http://localhost:3000/api/v1/lists/show_special/\".concat(id)).then(res => res.json()).then(data => {\n      dispatch({\n        type: FETCH_LIST_BY_ID,\n        leads: data.leads,\n        list: data.list\n      });\n      history.push(\"/leads\");\n    });\n  };\n}\nexport function thunkFetchAllListById(id) {\n  return function (dispatch) {\n    fetch(\"http://localhost:3000/api/v1/lists/show_special_all/\".concat(id)).then(res => res.json()).then(data => {\n      dispatch({\n        type: FETCH_LIST_WITH_LEADNOTES,\n        leads: data.leads_with_notes\n      });\n    });\n  };\n} //! FETCHES ONE LEADNOTE (DONT THINK I NEED THIS ANYMORE)\n// export function thunkFetchLeadNote(user_id, lead_id) {\n//   return function(dispatch) {\n//     dispatch({ type: START_FETCH_LEADNOTE });\n//     fetch(\"http://localhost:3000/leadnotes/show\", {\n//       method: \"POST\",\n//       headers: {\n//         \"Content-Type\": 'application/json',\n//         \"Accept\": 'application/json'\n//       },\n//       body: JSON.stringify({\n//         user_id: user_id,\n//         lead_id: lead_id\n//       })\n//     })\n//     .then(res => res.json())\n//     .then(data => {\n//       console.log(\"leadnote\", data)\n//       // dispatch({ type: FETCH_LEADNOTE, leadnote: data});\n//       // history.push('/leads')\n//     })\n//   }\n// }\n// ! FETCHES ALL LEADNOTES\n// export function thunkFetchLeadNotes(user_id) {\n//   return function(dispatch) {\n//     dispatch({ type: START_FETCH_LEADNOTES });\n//     fetch(`http://localhost:3000/leadnotes/${user_id}`)\n//     .then(res => res.json())\n//     .then(data => {\n//       console.log(\"leadnotes\", data)\n//       dispatch({ type: FETCH_LEADNOTES, leadnotes: data});\n//       // history.push('/leads')\n//     })\n//   }\n// }\n/////////////////// FETCHING LEADLIST /////////////////////////\n// export function thunkFetchListById(id, history) {\n//   return function(dispatch) {\n//     // dispatch({ type: START_FETCH_LISTS });\n//     fetch(`http://localhost:3000/api/v1/lists/show/${id}`)\n//       .then(res => res.json())\n//       .then(data => {\n//         console.log(data.leads)\n//         dispatch({ type: FETCH_LIST_BY_ID, listlead: data.leads, listid: data.id});\n//         history.push('/leads')\n//       });\n//   };\n// }\n// creating a new lead instance of the one the user saved and creating the association between list and lead\n\nexport function addLead(leadsArray, company, website, listId, newListName, userId) {\n  return function (dispatch) {\n    // const token = localStorage.token;\n    dispatch({\n      type: START_FETCH_LEADS_AND_LIST\n    });\n    fetch(\"http://localhost:3000/api/v1/leads\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        leadsArray,\n        company: company,\n        website: website\n      })\n    }).then(res => res.json()).then(data => {\n      const leadsData = data;\n\n      if (listId) {\n        data.forEach(lead => {\n          fetch(\"http://localhost:3000/api/v1/leadlists\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Accept: \"application/json\"\n            },\n            body: JSON.stringify({\n              list_id: listId,\n              lead_id: lead.id\n            })\n          }).then(res => res.json()).then(data => {\n            dispatch({\n              type: SUCCESS_MESSAGE,\n              message: data.message\n            });\n          }).catch(error => {\n            dispatch({\n              type: FETCH_ERROR,\n              error: error.errors\n            });\n          });\n        });\n      } else {\n        fetch(\"http://localhost:3000/api/v1/lists\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\"\n          },\n          body: JSON.stringify({\n            name: newListName,\n            user_id: userId\n          })\n        }).then(res => res.json()).then(data => {\n          dispatch({\n            type: ADD_LIST,\n            list: data\n          });\n          leadsData.forEach(lead => {\n            fetch(\"http://localhost:3000/api/v1/leadlists\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\"\n              },\n              body: JSON.stringify({\n                list_id: data.id,\n                lead_id: lead.id\n              })\n            }) // end of the fetch\n            .then(res => res.json()).then(data => {\n              dispatch({\n                type: SUCCESS_MESSAGE,\n                message: data.message\n              });\n              dispatch({\n                type: COMPLETE_FETCH_LEADS_AND_LIST\n              });\n            }).catch(error => {\n              dispatch({\n                type: FETCH_ERROR,\n                error: error.errors\n              });\n            });\n          });\n        }).catch(error => {\n          dispatch({\n            type: FETCH_ERROR,\n            error: error.errors\n          });\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: FETCH_ERROR,\n        error: error.errors\n      });\n    });\n  };\n}\nexport function addList(newListName, userId) {\n  return function (dispatch) {\n    fetch(\"http://localhost:3000/api/v1/lists\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        name: newListName,\n        user_id: userId\n      })\n    }).then(res => res.json()).then(data => {\n      dispatch({\n        type: ADD_LIST,\n        list: data\n      });\n    }).catch(err => console.log(err));\n  };\n}\nexport function thunkFetchLeads(domainName, history) {\n  return function (dispatch) {\n    dispatch({\n      type: START_FETCH_LEADS\n    });\n    fetch(\"https://api.hunter.io/v2/domain-search?domain=\".concat(domainName, \"&limit=100&api_key=7ca084937e5e049696b7bb64c10366c3d077c650\")).then(res => res.json()).then(result => {\n      dispatch({\n        type: FETCH_LEADS,\n        id: uuidv1(),\n        leads: result.data\n      });\n      history.push(\"/results\"); // history.push(\"/s\");\n    });\n  };\n}\nexport function deleteList(id) {\n  return function (dispatch) {\n    dispatch({\n      type: START_DELETE_LIST\n    });\n    fetch(\"http://localhost:3000/api/v1/lists/\".concat(id), {\n      method: \"DELETE\"\n    }).then(res => res.json()).then(dispatch({\n      type: DELETE_LIST,\n      id\n    })).catch(err => console.log(err));\n  };\n} // ? delete lead from LeadList.js\n\nexport function deleteListLead(list_id, lead_id) {\n  return function (dispatch) {\n    fetch(\"http://localhost:3000/api/v1/leadlists\", {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        list_id: list_id,\n        lead_id: lead_id\n      })\n    }).then(res => res.json()).then(data => dispatch({\n      type: DELETE_LISTLEAD,\n      id: lead_id\n    })) // dispatch({type: DELETE_LISTLEAD, lead_id: lead_id, list: list_id})})\n    .catch(err => console.log(err));\n  };\n}\nexport function addLeadNote(status, nextSteps, userId, leadId, comment) {\n  return function (dispatch) {\n    fetch(\"http://localhost:3000/leadnotes/create\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        status: status,\n        next_steps: nextSteps,\n        comments: comment,\n        lead_id: leadId,\n        user_id: userId\n      })\n    }).then(res => res.json()).then(data => {\n      dispatch({\n        type: ADD_LEAD_NOTE\n      });\n    }).catch(err => console.log(err));\n  };\n} // ! I DONT THINK THIS FUNCTION IS FINISHED YET (29/SEP)\n\nexport function updateUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch(\"http://localhost:3000/api/v1/auth\", reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        //handle error case\n        console.log(data.error);\n      } else {\n        localStorage.token = data.token;\n        dispatch(loginUser(data.user));\n        history.push(\"/profile\");\n      }\n    });\n  };\n}\nexport function fetchError(error) {\n  return function (dispatch) {\n    dispatch({\n      type: FETCH_ERROR,\n      error\n    });\n  };\n}\nexport function clearMessage() {\n  return function (dispatch) {\n    dispatch({\n      type: CLEAR_MESSAGE\n    });\n  };\n}","map":{"version":3,"sources":["/Users/gracetan/Development/module-projects/module-five-project/project-prospect-frontend/src/actions/index.js"],"names":["FETCH_CATEGORIES","START_FETCH_CATEGORIES","START_FETCH_LEADS","START_FETCH_LEADS_AND_LIST","FETCH_LEADS","START_FETCH_LISTS","START_FETCH_LEADNOTES","FETCH_LISTS","FETCH_LEADNOTES","ADD_LIST","LOGIN_USER","LOGOUT_USER","START_DELETE_LIST","START_DELETE_LEAD","DELETE_LIST","DELETE_LISTLEAD","FETCH_LIST_BY_ID","ADD_LEAD_NOTE","ACTION_SUCCESS","FETCH_LIST_WITH_LEADNOTES","COMPLETE_FETCH_LEADS_AND_LIST","FETCH_ERROR","SUCCESS_MESSAGE","CLEAR_MESSAGE","uuidv1","require","loginUser","user","type","logoutUser","currentUser","history","dispatch","token","localStorage","reqObj","method","headers","Authorization","fetch","then","resp","json","data","error","push","console","log","loadUser","loadingCb","successCb","failCb","catch","err","login","formData","body","JSON","stringify","message","registerUser","thunkFetchCategories","res","categories","thunkFetchLists","id","lists","thunkFetchListById","leads","list","thunkFetchAllListById","leads_with_notes","addLead","leadsArray","company","website","listId","newListName","userId","Accept","leadsData","forEach","lead","list_id","lead_id","errors","name","user_id","addList","thunkFetchLeads","domainName","result","deleteList","deleteListLead","addLeadNote","status","nextSteps","leadId","comment","next_steps","comments","updateUser","fetchError","clearMessage"],"mappings":"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","sourcesContent":["export const FETCH_CATEGORIES = \"FETCH_CATEGORIES\";\nexport const START_FETCH_CATEGORIES = \"START_FETCH_CATEGORIES\";\nexport const START_FETCH_LEADS = \"START_FETCH_LEADS\";\nexport const START_FETCH_LEADS_AND_LIST = \"START_FETCH_LEADS_AND_LIST\";\nexport const FETCH_LEADS = \"FETCH_LEADS\";\nexport const START_FETCH_LISTS = \"FETCH_LISTS\";\nexport const START_FETCH_LEADNOTES = \"START_FETCH_LEADNOTES\";\nexport const FETCH_LISTS = \"FETCH_LISTS\";\nexport const FETCH_LEADNOTES = \"FETCH_LEADNOTES\";\nexport const ADD_LIST = \"ADD_LIST\";\nexport const LOGIN_USER = \"LOGIN_USER\";\nexport const LOGOUT_USER = \"LOGOUT_USER\";\nexport const START_DELETE_LIST = \"START_DELETE_LIST\";\nexport const START_DELETE_LEAD = \"START_DELETE_LIST\";\nexport const DELETE_LIST = \"DELETE_LIST\";\nexport const DELETE_LISTLEAD = \"DELETE_LISTLEAD\";\nexport const FETCH_LIST_BY_ID = \"FETCH_LIST_BY_ID\";\nexport const ADD_LEAD_NOTE = \"ADD_LEAD_NOTE\";\nexport const ACTION_SUCCESS = \"ACTION_SUCCESS\";\nexport const FETCH_LIST_WITH_LEADNOTES = \"FETCH_LIST_WITH_LEADNOTES\";\nexport const COMPLETE_FETCH_LEADS_AND_LIST = \"COMPLETE_FETCH_LEADS_AND_LIST\";\nexport const FETCH_ERROR = \"FETCH_ERROR\"\nexport const SUCCESS_MESSAGE = \"SUCCESS_MESSAGE\"\nexport const CLEAR_MESSAGE = \"CLEAR_MESSAGE\"\n// export const START_DELETE_LEADLIST = \"START_DELETE_LEADLIST\";\n\nconst uuidv1 = require(\"uuid/v1\");\n\n// LOGIN\n\nexport function loginUser(user) {\n  return {\n    type: \"LOGIN_USER\",\n    user\n  };\n}\n\nexport function logoutUser() {\n  return {\n    type: \"LOGOUT_USER\"\n  };\n}\n\nexport function currentUser(history) {\n  return dispatch => {\n    const token = localStorage.token;\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      }\n    };\n\n    // dispatch with \"loading\" current user\n\n    return fetch(\"http://localhost:3000/api/v1/current_user\", reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          //handle error\n          history.push(\"/\");\n          console.log(\"current user\", data.error);\n        } else {\n          dispatch(loginUser({ user: data.user }));\n        }\n      });\n  };\n}\n\n// ? testing\nexport function loadUser(loadingCb, successCb, failCb) {\n  return function(dispatch) {\n    loadingCb();\n    const token = localStorage.token;\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      }\n    };\n\n    // dispatch with \"loading\" current user\n\n    return fetch(\"http://localhost:3000/api/v1/current_user\", reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        dispatch({ type: \"ACTION_SUCCESS\", user: data.user });\n        successCb();\n      })\n      .catch(err => {\n        failCb();\n      });\n  };\n}\n\nexport function login(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(formData)\n    };\n\n    return fetch(\"http://localhost:3000/api/v1/login\", reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.message) {\n          //handle error case\n          console.log(\"login error\", data.message);\n        } else {\n          console.log(\"fetch login\", data);\n          localStorage.token = data.token;\n          dispatch(loginUser({ user: data.user }));\n          dispatch({type: \"CLEAR_MESSAGE\"})\n          history.push(\"/\");\n        }\n      })\n      .catch(err => console.log(err));\n  };\n}\n\nexport function registerUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(formData)\n    };\n\n    return fetch(\"http://localhost:3000/api/v1/auth\", reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          //handle error case\n          console.log(data.error);\n        } else {\n          localStorage.token = data.token;\n          dispatch(loginUser(data.user));\n          history.push(\"/\");\n        }\n      });\n  };\n}\n\n////LOGIN\n\nexport function thunkFetchCategories() {\n  return function(dispatch) {\n    dispatch({ type: START_FETCH_CATEGORIES });\n\n    fetch(\"http://localhost:3000/api/v1/categories\")\n      .then(res => res.json())\n      .then(data => {\n        dispatch({ type: FETCH_CATEGORIES, categories: data });\n      });\n  };\n}\n\n// ? Invoked on App.js and fetches all lists in array format with leads data\n// ? Used to populate the Dashboard.js\n\nexport function thunkFetchLists(id) {\n  return function(dispatch) {\n    // dispatch({ type: START_FETCH_LISTS });\n\n    fetch(`http://localhost:3000/api/v1/lists/show_lists/${id}`)\n      .then(res => res.json())\n      .then(data => {\n        dispatch({ type: FETCH_LISTS, lists: data });\n      });\n  };\n}\n\n// ? Search by id of the LIST and return a list with leads and leadnote data\n// ? Used to populate LeadList.js\n\nexport function thunkFetchListById(id, history) {\n  return function(dispatch) {\n    fetch(`http://localhost:3000/api/v1/lists/show_special/${id}`)\n      .then(res => res.json())\n      .then(data => {\n        dispatch({\n          type: FETCH_LIST_BY_ID,\n          leads: data.leads,\n          list: data.list\n        });\n        history.push(\"/leads\");\n      });\n  };\n}\n\nexport function thunkFetchAllListById(id) {\n  return function(dispatch) {\n    fetch(`http://localhost:3000/api/v1/lists/show_special_all/${id}`)\n      .then(res => res.json())\n      .then(data => {\n        dispatch({\n          type: FETCH_LIST_WITH_LEADNOTES,\n          leads: data.leads_with_notes\n        });\n      });\n  };\n}\n\n//! FETCHES ONE LEADNOTE (DONT THINK I NEED THIS ANYMORE)\n// export function thunkFetchLeadNote(user_id, lead_id) {\n//   return function(dispatch) {\n//     dispatch({ type: START_FETCH_LEADNOTE });\n\n//     fetch(\"http://localhost:3000/leadnotes/show\", {\n//       method: \"POST\",\n//       headers: {\n//         \"Content-Type\": 'application/json',\n//         \"Accept\": 'application/json'\n//       },\n//       body: JSON.stringify({\n//         user_id: user_id,\n//         lead_id: lead_id\n//       })\n//     })\n//     .then(res => res.json())\n//     .then(data => {\n//       console.log(\"leadnote\", data)\n//       // dispatch({ type: FETCH_LEADNOTE, leadnote: data});\n//       // history.push('/leads')\n//     })\n//   }\n// }\n\n// ! FETCHES ALL LEADNOTES\n\n// export function thunkFetchLeadNotes(user_id) {\n//   return function(dispatch) {\n//     dispatch({ type: START_FETCH_LEADNOTES });\n\n//     fetch(`http://localhost:3000/leadnotes/${user_id}`)\n//     .then(res => res.json())\n//     .then(data => {\n//       console.log(\"leadnotes\", data)\n//       dispatch({ type: FETCH_LEADNOTES, leadnotes: data});\n//       // history.push('/leads')\n//     })\n//   }\n// }\n\n/////////////////// FETCHING LEADLIST /////////////////////////\n\n// export function thunkFetchListById(id, history) {\n//   return function(dispatch) {\n//     // dispatch({ type: START_FETCH_LISTS });\n\n//     fetch(`http://localhost:3000/api/v1/lists/show/${id}`)\n//       .then(res => res.json())\n//       .then(data => {\n//         console.log(data.leads)\n//         dispatch({ type: FETCH_LIST_BY_ID, listlead: data.leads, listid: data.id});\n//         history.push('/leads')\n//       });\n//   };\n// }\n\n// creating a new lead instance of the one the user saved and creating the association between list and lead\nexport function addLead(\n  leadsArray,\n  company,\n  website,\n  listId,\n  newListName,\n  userId\n) {\n  return function(dispatch) {\n    // const token = localStorage.token;\n    dispatch({ type: START_FETCH_LEADS_AND_LIST });\n\n    fetch(\"http://localhost:3000/api/v1/leads\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        leadsArray,\n        company: company,\n        website: website\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        const leadsData = data;\n        if (listId) {\n          data.forEach(lead => {\n            fetch(\"http://localhost:3000/api/v1/leadlists\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\"\n              },\n              body: JSON.stringify({\n                list_id: listId,\n                lead_id: lead.id\n              })\n            })\n            .then(res => res.json())\n            .then(data => {\n            dispatch({type: SUCCESS_MESSAGE, message: data.message})})\n            .catch(error => {\n              dispatch({type: FETCH_ERROR, error: error.errors})});\n          });\n        } else {\n          fetch(\"http://localhost:3000/api/v1/lists\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Accept: \"application/json\"\n            },\n            body: JSON.stringify({\n              name: newListName,\n              user_id: userId\n            })\n          })\n            .then(res => res.json())\n            .then(data => {\n              dispatch({ type: ADD_LIST, list: data });\n              leadsData.forEach(lead => {\n                fetch(\"http://localhost:3000/api/v1/leadlists\", {\n                  method: \"POST\",\n                  headers: {\n                    \"Content-Type\": \"application/json\",\n                    Accept: \"application/json\"\n                  },\n                  body: JSON.stringify({\n                    list_id: data.id,\n                    lead_id: lead.id\n                  })\n                }) // end of the fetch\n                  .then(res => res.json())\n                  .then(data => {\n                    dispatch({type: SUCCESS_MESSAGE, message: data.message})\n                    dispatch({ type: COMPLETE_FETCH_LEADS_AND_LIST });\n                  })\n                  .catch(error => {\n                    dispatch({type: FETCH_ERROR, error: error.errors})\n                  });\n              });\n            })\n            .catch(error => {\n              dispatch({type: FETCH_ERROR, error: error.errors})});\n        }\n      })\n      .catch(error => {\n        dispatch({type: FETCH_ERROR, error: error.errors})});\n  };\n}\n\nexport function addList(newListName, userId) {\n  return function(dispatch) {\n    fetch(\"http://localhost:3000/api/v1/lists\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        name: newListName,\n        user_id: userId\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        dispatch({ type: ADD_LIST, list: data });\n      })\n      .catch(err => console.log(err));\n  };\n}\n\nexport function thunkFetchLeads(domainName, history) {\n  return function(dispatch) {\n    dispatch({ type: START_FETCH_LEADS });\n\n    fetch(\n      `https://api.hunter.io/v2/domain-search?domain=${domainName}&limit=100&api_key=7ca084937e5e049696b7bb64c10366c3d077c650`\n    )\n      .then(res => res.json())\n      .then(result => {\n        dispatch({ type: FETCH_LEADS, id: uuidv1(), leads: result.data });\n        history.push(\"/results\");\n        // history.push(\"/s\");\n      });\n  };\n}\n\nexport function deleteList(id) {\n  return function(dispatch) {\n    dispatch({ type: START_DELETE_LIST });\n\n    fetch(`http://localhost:3000/api/v1/lists/${id}`, {\n      method: \"DELETE\"\n    })\n      .then(res => res.json())\n      .then(dispatch({ type: DELETE_LIST, id }))\n      .catch(err => console.log(err));\n  };\n}\n\n// ? delete lead from LeadList.js\nexport function deleteListLead(list_id, lead_id) {\n  return function(dispatch) {\n    fetch(`http://localhost:3000/api/v1/leadlists`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        list_id: list_id,\n        lead_id: lead_id\n      })\n    })\n      .then(res => res.json())\n      .then(data => dispatch({ type: DELETE_LISTLEAD, id: lead_id }))\n      // dispatch({type: DELETE_LISTLEAD, lead_id: lead_id, list: list_id})})\n      .catch(err => console.log(err));\n  };\n}\n\nexport function addLeadNote(status, nextSteps, userId, leadId, comment) {\n  return function(dispatch) {\n    fetch(\"http://localhost:3000/leadnotes/create\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        status: status,\n        next_steps: nextSteps,\n        comments: comment,\n        lead_id: leadId,\n        user_id: userId\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        dispatch({ type: ADD_LEAD_NOTE });\n      })\n      .catch(err => console.log(err));\n  };\n}\n\n// ! I DONT THINK THIS FUNCTION IS FINISHED YET (29/SEP)\nexport function updateUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(formData)\n    };\n\n    return fetch(\"http://localhost:3000/api/v1/auth\", reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          //handle error case\n          console.log(data.error);\n        } else {\n          localStorage.token = data.token;\n          dispatch(loginUser(data.user));\n          history.push(\"/profile\");\n        }\n      });\n  };\n}\n\nexport function fetchError(error) {\n  return function(dispatch) {\n    dispatch({ type: FETCH_ERROR, error });\n  };\n}\n\nexport function clearMessage() {\n  return function(dispatch) {\n    dispatch({ type: CLEAR_MESSAGE });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}