{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _events = require('events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _utils = require('../utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _dataContext = require('./data-context');\n\nvar _dataContext2 = _interopRequireDefault(_dataContext);\n\nvar _columnContext = require('./column-context');\n\nvar _columnContext2 = _interopRequireDefault(_columnContext);\n\nvar _sortContext = require('./sort-context');\n\nvar _sortContext2 = _interopRequireDefault(_sortContext);\n\nvar _selectionContext = require('./selection-context');\n\nvar _selectionContext2 = _interopRequireDefault(_selectionContext);\n\nvar _rowExpandContext = require('./row-expand-context');\n\nvar _rowExpandContext2 = _interopRequireDefault(_rowExpandContext);\n\nvar _remoteResolver2 = require('../props-resolver/remote-resolver');\n\nvar _remoteResolver3 = _interopRequireDefault(_remoteResolver2);\n\nvar _bootstrap = require('./bootstrap');\n\nvar _operators = require('../store/operators');\n\nvar _operators2 = _interopRequireDefault(_operators);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/* eslint camelcase: 0 */\n\n/* eslint no-return-assign: 0 */\n\n/* eslint no-param-reassign: 0 */\n\n/* eslint class-methods-use-this: 0 */\n\n\nvar withContext = function withContext(Base) {\n  return function (_remoteResolver) {\n    _inherits(BootstrapTableContainer, _remoteResolver);\n\n    function BootstrapTableContainer(props) {\n      _classCallCheck(this, BootstrapTableContainer);\n\n      var _this = _possibleConstructorReturn(this, (BootstrapTableContainer.__proto__ || Object.getPrototypeOf(BootstrapTableContainer)).call(this, props));\n\n      _this.DataContext = (0, _dataContext2.default)();\n\n      if (props.registerExposedAPI) {\n        var exposedAPIEmitter = new _events2.default();\n        exposedAPIEmitter.on('get.table.data', function (payload) {\n          return payload.result = _this.table.getData();\n        });\n        exposedAPIEmitter.on('get.selected.rows', function (payload) {\n          return payload.result = _this.selectionContext.getSelected();\n        });\n        exposedAPIEmitter.on('get.filtered.rows', function (payload) {\n          if (_this.searchContext) {\n            payload.result = _this.searchContext.getSearched();\n          } else if (_this.filterContext) {\n            payload.result = _this.filterContext.getFiltered();\n          } else {\n            payload.result = _this.table.getData();\n          }\n        });\n        props.registerExposedAPI(exposedAPIEmitter);\n      }\n\n      if (props.columns.filter(function (col) {\n        return col.sort;\n      }).length > 0) {\n        _this.SortContext = (0, _sortContext2.default)(_operators2.default, _this.isRemoteSort, _this.handleRemoteSortChange);\n      }\n\n      if (props.columnToggle || props.columns.filter(function (col) {\n        return col.hidden;\n      }).length > 0) {\n        _this.ColumnManagementContext = (0, _columnContext2.default)();\n      }\n\n      if (props.selectRow) {\n        _this.SelectionContext = _selectionContext2.default;\n      }\n\n      if (props.expandRow) {\n        _this.RowExpandContext = _rowExpandContext2.default;\n      }\n\n      if (props.cellEdit && props.cellEdit.createContext) {\n        _this.CellEditContext = props.cellEdit.createContext(_utils2.default, _operators2.default, _this.isRemoteCellEdit, _this.handleRemoteCellChange);\n      }\n\n      if (props.filter) {\n        _this.FilterContext = props.filter.createContext(_utils2.default, _this.isRemoteFiltering, _this.handleRemoteFilterChange);\n      }\n\n      if (props.pagination) {\n        _this.PaginationContext = props.pagination.createContext();\n      }\n\n      if (props.search && props.search.searchContext) {\n        _this.SearchContext = props.search.searchContext(_utils2.default, _this.isRemoteSearch, _this.handleRemoteSearchChange);\n      }\n\n      if (props.setDependencyModules) {\n        props.setDependencyModules(_utils2.default);\n      }\n\n      if (props.setPaginationRemoteEmitter) {\n        props.setPaginationRemoteEmitter(_this.remoteEmitter);\n      }\n\n      return _this;\n    }\n\n    _createClass(BootstrapTableContainer, [{\n      key: 'UNSAFE_componentWillReceiveProps',\n      value: function UNSAFE_componentWillReceiveProps(nextProps) {\n        if (!nextProps.pagination && this.props.pagination) {\n          this.PaginationContext = null;\n        }\n\n        if (nextProps.pagination && !this.props.pagination) {\n          this.PaginationContext = nextProps.pagination.createContext(this.isRemotePagination, this.handleRemotePageChange);\n        }\n\n        if (!nextProps.cellEdit && this.props.cellEdit) {\n          this.CellEditContext = null;\n        }\n\n        if (nextProps.cellEdit && !this.props.cellEdit) {\n          this.CellEditContext = nextProps.cellEdit.createContext(_utils2.default, _operators2.default, this.isRemoteCellEdit, this.handleRemoteCellChange);\n        }\n      }\n    }, {\n      key: 'renderBase',\n      value: function renderBase() {\n        var _this2 = this;\n\n        return function (rootProps, filterProps, searchProps, sortProps, paginationProps, columnToggleProps) {\n          return _react2.default.createElement(Base, _extends({\n            ref: function ref(n) {\n              return _this2.table = n;\n            }\n          }, _this2.props, sortProps, filterProps, searchProps, paginationProps, columnToggleProps, {\n            data: rootProps.getData(filterProps, searchProps, sortProps, paginationProps)\n          }));\n        };\n      }\n    }, {\n      key: 'renderWithColumnManagementCtx',\n      value: function renderWithColumnManagementCtx(base, baseProps) {\n        var _this3 = this;\n\n        return function (rootProps, filterProps, searchProps, sortProps, paginationProps) {\n          return _react2.default.createElement(_this3.ColumnManagementContext.Provider, _extends({}, baseProps, {\n            toggles: _this3.props.columnToggle ? _this3.props.columnToggle.toggles : null\n          }), _react2.default.createElement(_this3.ColumnManagementContext.Consumer, null, function (columnToggleProps) {\n            return base(rootProps, filterProps, searchProps, sortProps, paginationProps, columnToggleProps);\n          }));\n        };\n      }\n    }, {\n      key: 'renderWithSelectionCtx',\n      value: function renderWithSelectionCtx(base, baseProps) {\n        var _this4 = this;\n\n        return function (rootProps, filterProps, searchProps, sortProps, paginationProps) {\n          return _react2.default.createElement(_this4.SelectionContext.Provider, _extends({}, baseProps, {\n            ref: function ref(n) {\n              return _this4.selectionContext = n;\n            },\n            selectRow: _this4.props.selectRow,\n            data: rootProps.getData(filterProps, searchProps, sortProps, paginationProps)\n          }), base(rootProps, filterProps, searchProps, sortProps, paginationProps));\n        };\n      }\n    }, {\n      key: 'renderWithRowExpandCtx',\n      value: function renderWithRowExpandCtx(base, baseProps) {\n        var _this5 = this;\n\n        return function (rootProps, filterProps, searchProps, sortProps, paginationProps) {\n          return _react2.default.createElement(_this5.RowExpandContext.Provider, _extends({}, baseProps, {\n            ref: function ref(n) {\n              return _this5.rowExpandContext = n;\n            },\n            expandRow: _this5.props.expandRow,\n            data: rootProps.getData(filterProps, searchProps, sortProps, paginationProps)\n          }), base(rootProps, filterProps, searchProps, sortProps, paginationProps));\n        };\n      }\n    }, {\n      key: 'renderWithPaginationCtx',\n      value: function renderWithPaginationCtx(base) {\n        var _this6 = this;\n\n        return function (rootProps, filterProps, searchProps, sortProps) {\n          return _react2.default.createElement(_this6.PaginationContext.Provider, {\n            ref: function ref(n) {\n              return _this6.paginationContext = n;\n            },\n            pagination: _this6.props.pagination,\n            data: rootProps.getData(filterProps, searchProps, sortProps),\n            bootstrap4: _this6.props.bootstrap4,\n            isRemotePagination: _this6.isRemotePagination,\n            remoteEmitter: _this6.remoteEmitter,\n            onDataSizeChange: _this6.props.onDataSizeChange\n          }, _react2.default.createElement(_this6.PaginationContext.Consumer, null, function (paginationProps) {\n            return base(rootProps, filterProps, searchProps, sortProps, paginationProps);\n          }));\n        };\n      }\n    }, {\n      key: 'renderWithSortCtx',\n      value: function renderWithSortCtx(base, baseProps) {\n        var _this7 = this;\n\n        return function (rootProps, filterProps, searchProps) {\n          return _react2.default.createElement(_this7.SortContext.Provider, _extends({}, baseProps, {\n            ref: function ref(n) {\n              return _this7.sortContext = n;\n            },\n            defaultSorted: _this7.props.defaultSorted,\n            defaultSortDirection: _this7.props.defaultSortDirection,\n            data: rootProps.getData(filterProps, searchProps)\n          }), _react2.default.createElement(_this7.SortContext.Consumer, null, function (sortProps) {\n            return base(rootProps, filterProps, searchProps, sortProps);\n          }));\n        };\n      }\n    }, {\n      key: 'renderWithSearchCtx',\n      value: function renderWithSearchCtx(base, baseProps) {\n        var _this8 = this;\n\n        return function (rootProps, filterProps) {\n          return _react2.default.createElement(_this8.SearchContext.Provider, _extends({}, baseProps, {\n            ref: function ref(n) {\n              return _this8.searchContext = n;\n            },\n            data: rootProps.getData(filterProps),\n            searchText: _this8.props.search.searchText,\n            dataChangeListener: _this8.props.dataChangeListener\n          }), _react2.default.createElement(_this8.SearchContext.Consumer, null, function (searchProps) {\n            return base(rootProps, filterProps, searchProps);\n          }));\n        };\n      }\n    }, {\n      key: 'renderWithFilterCtx',\n      value: function renderWithFilterCtx(base, baseProps) {\n        var _this9 = this;\n\n        return function (rootProps) {\n          return _react2.default.createElement(_this9.FilterContext.Provider, _extends({}, baseProps, {\n            ref: function ref(n) {\n              return _this9.filterContext = n;\n            },\n            data: rootProps.getData(),\n            dataChangeListener: _this9.props.dataChangeListener\n          }), _react2.default.createElement(_this9.FilterContext.Consumer, null, function (filterProps) {\n            return base(rootProps, filterProps);\n          }));\n        };\n      }\n    }, {\n      key: 'renderWithCellEditCtx',\n      value: function renderWithCellEditCtx(base, baseProps) {\n        var _this10 = this;\n\n        return function (rootProps) {\n          return _react2.default.createElement(_this10.CellEditContext.Provider, _extends({}, baseProps, {\n            ref: function ref(n) {\n              return _this10.cellEditContext = n;\n            },\n            selectRow: _this10.props.selectRow,\n            cellEdit: _this10.props.cellEdit,\n            data: rootProps.getData()\n          }), base(rootProps));\n        };\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _props = this.props,\n            keyField = _props.keyField,\n            columns = _props.columns,\n            bootstrap4 = _props.bootstrap4;\n        var baseProps = {\n          keyField: keyField,\n          columns: columns\n        };\n        var base = this.renderBase();\n\n        if (this.ColumnManagementContext) {\n          base = this.renderWithColumnManagementCtx(base, baseProps);\n        }\n\n        if (this.SelectionContext) {\n          base = this.renderWithSelectionCtx(base, baseProps);\n        }\n\n        if (this.RowExpandContext) {\n          base = this.renderWithRowExpandCtx(base, baseProps);\n        }\n\n        if (this.PaginationContext) {\n          base = this.renderWithPaginationCtx(base, baseProps);\n        }\n\n        if (this.SortContext) {\n          base = this.renderWithSortCtx(base, baseProps);\n        }\n\n        if (this.SearchContext) {\n          base = this.renderWithSearchCtx(base, baseProps);\n        }\n\n        if (this.FilterContext) {\n          base = this.renderWithFilterCtx(base, baseProps);\n        }\n\n        if (this.CellEditContext) {\n          base = this.renderWithCellEditCtx(base, baseProps);\n        }\n\n        return _react2.default.createElement(_bootstrap.BootstrapContext.Provider, {\n          value: {\n            bootstrap4: bootstrap4\n          }\n        }, _react2.default.createElement(this.DataContext.Provider, _extends({}, baseProps, {\n          data: this.props.data\n        }), _react2.default.createElement(this.DataContext.Consumer, null, base)));\n      }\n    }]);\n\n    return BootstrapTableContainer;\n  }((0, _remoteResolver3.default)(_react.Component));\n};\n\nexports.default = withContext;","map":null,"metadata":{},"sourceType":"script"}