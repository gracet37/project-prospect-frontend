{"ast":null,"code":"var _jsxFileName = \"/Users/gracetan/Development/module-projects/module-five-project/project-prospect-frontend/src/components/Dashboard.js\";\nimport React, { Component } from \"react\";\nimport { Grid, Image, Card, Table, Icon, Confirm, Button, Modal, Form, Header } from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport _ from \"lodash\";\nimport Navbar from \"./Navbar\";\nimport { deleteList, thunkFetchListById, addList, clearMessage } from \"../actions\";\n\nconst uuidv1 = require(\"uuid/v1\");\n\nconst styleMetrics = {\n  borderWidth: \"2px\",\n  // marginRight: '30px',\n  borderRadius: \"10px\",\n  borderColor: \"#CECFD0\",\n  borderStyle: \"solid\",\n  margin: \"20px\",\n  padding: \"20px\",\n  // width: \"10px\",\n  height: \"150px\",\n  boxShadow: \"10px 10px 15px -6px rgba(67,66,93,0.68)\" // padding: \"20px\"\n\n};\nconst styleImage = {\n  position: \"relative\",\n  top: \"-40px\",\n  opacity: 0.8\n};\nconst styleRow = {\n  top: \"70px\",\n  margin: \"20px\",\n  paddingRight: \"120px\",\n  paddingLeft: \"120px\",\n  marginBottom: \"40px\",\n  position: \"relative\",\n  textAlign: \"left\"\n};\n\nclass Dashboard extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      column: null,\n      data: [],\n      direction: null,\n      modalShow: false,\n      totalLeadCount: 0,\n      totalMeetingsBooked: 0,\n      totalNotContacted: 0,\n      newListName: \"\"\n    };\n\n    this.show = dimmer => this.setState({\n      dimmer,\n      modalShow: true\n    });\n\n    this.handleConfirmModal = () => this.setState({\n      modalShow: false\n    });\n\n    this.handleCancelModal = () => {\n      this.setState({\n        modalShow: false\n      }); // let newArray = this.state.data.filter(data => data.id !== id);\n      // this.setState({ data: newArray });\n      // this.props.deleteList(id);\n    };\n\n    this.countMeetingsBooked = () => {\n      let meetingsBookedCount = 0;\n\n      if (this.props.listWithLeadNotes) {\n        this.props.listWithLeadNotes.forEach(lead => {\n          lead.leadnotes.forEach(leadnote => {\n            if (leadnote.status === \"Meeting booked\") {\n              meetingsBookedCount += 1;\n            }\n          });\n        });\n        this.setState({\n          totalMeetingsBooked: meetingsBookedCount\n        });\n      } else {\n        return null;\n      }\n    };\n\n    this.countNotContacted = () => {\n      let notContacted = 0; // let testArray = []\n\n      if (this.props.listWithLeadNotes) {\n        this.props.listWithLeadNotes.forEach(lead => {\n          if (lead.leadnotes.length < 1) {\n            notContacted += 1;\n          }\n        });\n        this.setState({\n          totalNotContacted: notContacted\n        });\n      } else {\n        return null;\n      }\n    };\n\n    this.handleConfirm = (event, id) => {\n      // let newArray = this.props.lists.filter(list => list.id !== id);\n      this.setState({\n        modalShow: false\n      });\n      this.props.deleteList(id);\n    };\n\n    this.handleRowClick = id => {\n      console.log(\"row clicked\", id);\n      this.props.thunkFetchListById(id, this.props.history);\n    };\n\n    this.handleSort = clickedColumn => () => {\n      const _this$state = this.state,\n            column = _this$state.column,\n            direction = _this$state.direction;\n      const data = this.props.lists;\n\n      if (column !== clickedColumn) {\n        this.setState({\n          column: clickedColumn,\n          data: _.sortBy(data, [clickedColumn]),\n          direction: \"ascending\"\n        });\n        return;\n      }\n\n      this.setState({\n        data: this.props.lists.reverse(),\n        direction: direction === \"ascending\" ? \"descending\" : \"ascending\"\n      });\n    };\n\n    this.handleChange = e => {\n      const targetValue = e.target.value;\n      const targetName = e.target.name;\n      this.setState({\n        [targetName]: targetValue\n      });\n    };\n\n    this.handleSubmit = () => {\n      const newListName = this.state.newListName;\n      const userId = this.props.auth.user.id;\n      this.handleCancelModal();\n      this.props.clearMessage();\n      this.props.addList(newListName, userId);\n    };\n\n    this.handleClearMessage = () => {\n      this.props.clearMessage();\n    };\n  }\n\n  componentDidMount() {\n    // this.formattedListArray();\n    // this.countTotalLeads();\n    this.countMeetingsBooked();\n    this.countNotContacted();\n  }\n\n  renderListBody() {\n    console.log(\"asfd\", this.props.lists);\n    return React.createElement(Table.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, _.map(this.props.lists, ({\n      id,\n      name,\n      created_at,\n      leads\n    }) => {\n      let dateString = new Date(created_at).toDateString();\n      let leadCount = leads.length; // let dateString = date\n\n      return React.createElement(Table.Row, {\n        textAlign: \"center\",\n        key: uuidv1(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(Table.Cell, {\n        onClick: () => this.handleRowClick(id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, name), React.createElement(Table.Cell, {\n        onClick: () => this.handleRowClick(id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, leadCount), React.createElement(Table.Cell, {\n        onClick: () => this.handleRowClick(id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, dateString), React.createElement(Table.Cell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        closeIcon: true,\n        size: \"mini\",\n        trigger: React.createElement(Icon, {\n          name: \"trash alternate outline\",\n          name: \"trash alternate outline\",\n          size: \"large\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"Delete List\"), React.createElement(Modal.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, \"Are you sure you want to delete this list?\")), React.createElement(Modal.Actions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(Button, {\n        style: {\n          borderRadius: \"30px\",\n          color: \"white\",\n          backgroundColor: \"#6200EE\"\n        },\n        onClick: this.handleCancelModal,\n        basic: true,\n        color: \"violet\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, \"No\"), React.createElement(Button, {\n        onClick: event => this.handleConfirm(event, id) // icon=\"checkmark\"\n        // labelPosition=\"right\"\n        ,\n        content: \"Yes\",\n        style: {\n          borderRadius: \"30px\",\n          color: \"white\",\n          backgroundColor: \"#03DAC6\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      })))));\n    }));\n  }\n\n  renderLeadCount() {\n    if (this.props.lists.length > 0) {\n      let leadCountArray = [];\n      let totalLeads;\n      console.log(this.props.lists);\n      this.props.lists.forEach(list => {\n        console.log(\"ist\", list);\n        let count = list.leads.length;\n        leadCountArray.push(count);\n      });\n      totalLeads = leadCountArray.reduce((total, count) => total + count); // this.setState({ totalLeadCount: totalLeads });\n\n      return React.createElement(Grid.Column, {\n        style: styleMetrics,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(Header, {\n        as: \"h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, \"Total Leads\"), React.createElement(Header, {\n        as: \"h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, totalLeads), React.createElement(Image, {\n        style: styleImage,\n        size: \"small\",\n        floated: \"right\",\n        src: \"https://scontent-ort2-2.xx.fbcdn.net/v/t1.15752-9/71338480_839476829779627_88982982114672640_n.png?_nc_cat=103&_nc_oc=AQk-PoFytrGO-egRH0bNhdK77YgmvNvozJbUsZvn9xAPPpjioM-SRk6hyr3rXfVVq2Y&_nc_ht=scontent-ort2-2.xx&oh=c1bc858aa386c365cae63c3eea610b9e&oe=5DF88CFF\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }));\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          column = _this$state2.column,\n          data = _this$state2.data,\n          direction = _this$state2.direction,\n          totalLeadCount = _this$state2.totalLeadCount,\n          totalMeetingsBooked = _this$state2.totalMeetingsBooked,\n          totalNotContacted = _this$state2.totalNotContacted; // console.log(this.props.lists)\n\n    console.log(this.state);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, this.renderMetricCards);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    lists: state.lists,\n    listWithLeadNotes: state.listWithLeadNotes,\n    message: state.message\n  };\n}; // const mapDispatchToProps = dispatch => {\n//   return {\n//     deleteList: id => {\n//       dispatch(deleteList(id));\n//     },\n//     thunkFetchListById: (id, history) => {\n//       dispatch(thunkFetchListById(id, history));\n//     }\n//   };\n// };\n\n\nexport default connect(mapStateToProps, {\n  deleteList,\n  thunkFetchListById,\n  addList,\n  clearMessage\n})(withRouter(Dashboard));","map":{"version":3,"sources":["/Users/gracetan/Development/module-projects/module-five-project/project-prospect-frontend/src/components/Dashboard.js"],"names":["React","Component","Grid","Image","Card","Table","Icon","Confirm","Button","Modal","Form","Header","connect","withRouter","_","Navbar","deleteList","thunkFetchListById","addList","clearMessage","uuidv1","require","styleMetrics","borderWidth","borderRadius","borderColor","borderStyle","margin","padding","height","boxShadow","styleImage","position","top","opacity","styleRow","paddingRight","paddingLeft","marginBottom","textAlign","Dashboard","state","column","data","direction","modalShow","totalLeadCount","totalMeetingsBooked","totalNotContacted","newListName","show","dimmer","setState","handleConfirmModal","handleCancelModal","countMeetingsBooked","meetingsBookedCount","props","listWithLeadNotes","forEach","lead","leadnotes","leadnote","status","countNotContacted","notContacted","length","handleConfirm","event","id","handleRowClick","console","log","history","handleSort","clickedColumn","lists","sortBy","reverse","handleChange","e","targetValue","target","value","targetName","name","handleSubmit","userId","auth","user","handleClearMessage","componentDidMount","renderListBody","map","created_at","leads","dateString","Date","toDateString","leadCount","color","backgroundColor","renderLeadCount","leadCountArray","totalLeads","list","count","push","reduce","total","render","renderMetricCards","mapStateToProps","message"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SACEC,IADF,EAEEC,KAFF,EAGEC,IAHF,EAIEC,KAJF,EAKEC,IALF,EAMEC,OANF,EAOEC,MAPF,EAQEC,KARF,EASEC,IATF,EAUEC,MAVF,QAWO,mBAXP;AAYA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SACEC,UADF,EAEEC,kBAFF,EAGEC,OAHF,EAIEC,YAJF,QAKO,YALP;;AAOA,MAAMC,MAAM,GAAGC,OAAO,CAAC,SAAD,CAAtB;;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,WAAW,EAAE,KADM;AAEnB;AACAC,EAAAA,YAAY,EAAE,MAHK;AAInBC,EAAAA,WAAW,EAAE,SAJM;AAKnBC,EAAAA,WAAW,EAAE,OALM;AAMnBC,EAAAA,MAAM,EAAE,MANW;AAOnBC,EAAAA,OAAO,EAAE,MAPU;AAQnB;AACAC,EAAAA,MAAM,EAAE,OATW;AAUnBC,EAAAA,SAAS,EAAE,yCAVQ,CAWnB;;AAXmB,CAArB;AAcA,MAAMC,UAAU,GAAG;AACjBC,EAAAA,QAAQ,EAAE,UADO;AAEjBC,EAAAA,GAAG,EAAE,OAFY;AAGjBC,EAAAA,OAAO,EAAE;AAHQ,CAAnB;AAMA,MAAMC,QAAQ,GAAG;AACfF,EAAAA,GAAG,EAAE,MADU;AAEfN,EAAAA,MAAM,EAAE,MAFO;AAGfS,EAAAA,YAAY,EAAE,OAHC;AAIfC,EAAAA,WAAW,EAAE,OAJE;AAKfC,EAAAA,YAAY,EAAE,MALC;AAMfN,EAAAA,QAAQ,EAAE,UANK;AAOfO,EAAAA,SAAS,EAAE;AAPI,CAAjB;;AAUA,MAAMC,SAAN,SAAwBvC,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAEhCwC,KAFgC,GAExB;AACNC,MAAAA,MAAM,EAAE,IADF;AAENC,MAAAA,IAAI,EAAE,EAFA;AAGNC,MAAAA,SAAS,EAAE,IAHL;AAINC,MAAAA,SAAS,EAAE,KAJL;AAKNC,MAAAA,cAAc,EAAE,CALV;AAMNC,MAAAA,mBAAmB,EAAE,CANf;AAONC,MAAAA,iBAAiB,EAAE,CAPb;AAQNC,MAAAA,WAAW,EAAE;AARP,KAFwB;;AAAA,SAoBhCC,IApBgC,GAoBzBC,MAAM,IAAI,KAAKC,QAAL,CAAc;AAAED,MAAAA,MAAF;AAAUN,MAAAA,SAAS,EAAE;AAArB,KAAd,CApBe;;AAAA,SAqBhCQ,kBArBgC,GAqBX,MAAM,KAAKD,QAAL,CAAc;AAAEP,MAAAA,SAAS,EAAE;AAAb,KAAd,CArBK;;AAAA,SAsBhCS,iBAtBgC,GAsBZ,MAAM;AACxB,WAAKF,QAAL,CAAc;AAAEP,QAAAA,SAAS,EAAE;AAAb,OAAd,EADwB,CAExB;AACA;AACA;AACD,KA3B+B;;AAAA,SA8DhCU,mBA9DgC,GA8DV,MAAM;AAC1B,UAAIC,mBAAmB,GAAG,CAA1B;;AACA,UAAI,KAAKC,KAAL,CAAWC,iBAAf,EAAkC;AAChC,aAAKD,KAAL,CAAWC,iBAAX,CAA6BC,OAA7B,CAAqCC,IAAI,IAAI;AAC3CA,UAAAA,IAAI,CAACC,SAAL,CAAeF,OAAf,CAAuBG,QAAQ,IAAI;AACjC,gBAAIA,QAAQ,CAACC,MAAT,KAAoB,gBAAxB,EAA0C;AACxCP,cAAAA,mBAAmB,IAAI,CAAvB;AACD;AACF,WAJD;AAKD,SAND;AAOA,aAAKJ,QAAL,CAAc;AAAEL,UAAAA,mBAAmB,EAAES;AAAvB,SAAd;AACD,OATD,MASO;AACL,eAAO,IAAP;AACD;AACF,KA5E+B;;AAAA,SA8EhCQ,iBA9EgC,GA8EZ,MAAM;AACxB,UAAIC,YAAY,GAAG,CAAnB,CADwB,CAExB;;AACA,UAAI,KAAKR,KAAL,CAAWC,iBAAf,EAAkC;AAChC,aAAKD,KAAL,CAAWC,iBAAX,CAA6BC,OAA7B,CAAqCC,IAAI,IAAI;AAC3C,cAAIA,IAAI,CAACC,SAAL,CAAeK,MAAf,GAAwB,CAA5B,EAA+B;AAC7BD,YAAAA,YAAY,IAAI,CAAhB;AACD;AACF,SAJD;AAKA,aAAKb,QAAL,CAAc;AAAEJ,UAAAA,iBAAiB,EAAEiB;AAArB,SAAd;AACD,OAPD,MAOO;AACL,eAAO,IAAP;AACD;AACF,KA3F+B;;AAAA,SA6FhCE,aA7FgC,GA6FhB,CAACC,KAAD,EAAQC,EAAR,KAAe;AAC7B;AACA,WAAKjB,QAAL,CAAc;AAAEP,QAAAA,SAAS,EAAE;AAAb,OAAd;AACA,WAAKY,KAAL,CAAWzC,UAAX,CAAsBqD,EAAtB;AACD,KAjG+B;;AAAA,SAmGhCC,cAnGgC,GAmGfD,EAAE,IAAI;AACrBE,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BH,EAA3B;AACA,WAAKZ,KAAL,CAAWxC,kBAAX,CAA8BoD,EAA9B,EAAkC,KAAKZ,KAAL,CAAWgB,OAA7C;AACD,KAtG+B;;AAAA,SAwGhCC,UAxGgC,GAwGnBC,aAAa,IAAI,MAAM;AAAA,0BACJ,KAAKlC,KADD;AAAA,YAC1BC,MAD0B,eAC1BA,MAD0B;AAAA,YAClBE,SADkB,eAClBA,SADkB;AAElC,YAAMD,IAAI,GAAG,KAAKc,KAAL,CAAWmB,KAAxB;;AAEA,UAAIlC,MAAM,KAAKiC,aAAf,EAA8B;AAC5B,aAAKvB,QAAL,CAAc;AACZV,UAAAA,MAAM,EAAEiC,aADI;AAEZhC,UAAAA,IAAI,EAAE7B,CAAC,CAAC+D,MAAF,CAASlC,IAAT,EAAe,CAACgC,aAAD,CAAf,CAFM;AAGZ/B,UAAAA,SAAS,EAAE;AAHC,SAAd;AAMA;AACD;;AAED,WAAKQ,QAAL,CAAc;AACZT,QAAAA,IAAI,EAAE,KAAKc,KAAL,CAAWmB,KAAX,CAAiBE,OAAjB,EADM;AAEZlC,QAAAA,SAAS,EAAEA,SAAS,KAAK,WAAd,GAA4B,YAA5B,GAA2C;AAF1C,OAAd;AAID,KA1H+B;;AAAA,SA4HhCmC,YA5HgC,GA4HjBC,CAAC,IAAI;AAClB,YAAMC,WAAW,GAAGD,CAAC,CAACE,MAAF,CAASC,KAA7B;AACA,YAAMC,UAAU,GAAGJ,CAAC,CAACE,MAAF,CAASG,IAA5B;AACA,WAAKjC,QAAL,CAAc;AAAE,SAACgC,UAAD,GAAcH;AAAhB,OAAd;AACD,KAhI+B;;AAAA,SAkIhCK,YAlIgC,GAkIjB,MAAM;AAAA,YACXrC,WADW,GACK,KAAKR,KADV,CACXQ,WADW;AAEnB,YAAMsC,MAAM,GAAG,KAAK9B,KAAL,CAAW+B,IAAX,CAAgBC,IAAhB,CAAqBpB,EAApC;AACA,WAAKf,iBAAL;AACA,WAAKG,KAAL,CAAWtC,YAAX;AACA,WAAKsC,KAAL,CAAWvC,OAAX,CAAmB+B,WAAnB,EAAgCsC,MAAhC;AACD,KAxI+B;;AAAA,SA0IhCG,kBA1IgC,GA0IX,MAAM;AACzB,WAAKjC,KAAL,CAAWtC,YAAX;AACD,KA5I+B;AAAA;;AAahCwE,EAAAA,iBAAiB,GAAG;AAClB;AACA;AACA,SAAKpC,mBAAL;AACA,SAAKS,iBAAL;AACD;;AA4HD4B,EAAAA,cAAc,GAAG;AACfrB,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoB,KAAKf,KAAL,CAAWmB,KAA/B;AACA,WACE,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG9D,CAAC,CAAC+E,GAAF,CAAM,KAAKpC,KAAL,CAAWmB,KAAjB,EAAwB,CAAC;AAAEP,MAAAA,EAAF;AAAMgB,MAAAA,IAAN;AAAYS,MAAAA,UAAZ;AAAwBC,MAAAA;AAAxB,KAAD,KAAqC;AAC5D,UAAIC,UAAU,GAAG,IAAIC,IAAJ,CAASH,UAAT,EAAqBI,YAArB,EAAjB;AACA,UAAIC,SAAS,GAAGJ,KAAK,CAAC7B,MAAtB,CAF4D,CAG5D;;AACA,aACE,oBAAC,KAAD,CAAO,GAAP;AAAW,QAAA,SAAS,EAAC,QAArB;AAA8B,QAAA,GAAG,EAAE9C,MAAM,EAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD,CAAO,IAAP;AAAY,QAAA,OAAO,EAAE,MAAM,KAAKkD,cAAL,CAAoBD,EAApB,CAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGgB,IADH,CADF,EAIE,oBAAC,KAAD,CAAO,IAAP;AAAY,QAAA,OAAO,EAAE,MAAM,KAAKf,cAAL,CAAoBD,EAApB,CAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG8B,SADH,CAJF,EAOE,oBAAC,KAAD,CAAO,IAAP;AAAY,QAAA,OAAO,EAAE,MAAM,KAAK7B,cAAL,CAAoBD,EAApB,CAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG2B,UADH,CAPF,EAUE,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD;AACE,QAAA,SAAS,MADX;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,OAAO,EACL,oBAAC,IAAD;AACE,UAAA,IAAI,EAAE,yBADR;AAEE,UAAA,IAAI,EAAC,yBAFP;AAGE,UAAA,IAAI,EAAC,OAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAWE,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAXF,EAYE,oBAAC,KAAD,CAAO,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sDADF,CAZF,EAeE,oBAAC,KAAD,CAAO,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,KAAK,EAAE;AACLxE,UAAAA,YAAY,EAAE,MADT;AAEL4E,UAAAA,KAAK,EAAE,OAFF;AAGLC,UAAAA,eAAe,EAAE;AAHZ,SADT;AAME,QAAA,OAAO,EAAE,KAAK/C,iBANhB;AAOE,QAAA,KAAK,MAPP;AAQE,QAAA,KAAK,EAAC,QARR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAaE,oBAAC,MAAD;AACE,QAAA,OAAO,EAAEc,KAAK,IAAI,KAAKD,aAAL,CAAmBC,KAAnB,EAA0BC,EAA1B,CADpB,CAEE;AACA;AAHF;AAIE,QAAA,OAAO,EAAC,KAJV;AAKE,QAAA,KAAK,EAAE;AACL7C,UAAAA,YAAY,EAAE,MADT;AAEL4E,UAAAA,KAAK,EAAE,OAFF;AAGLC,UAAAA,eAAe,EAAE;AAHZ,SALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbF,CAfF,CADF,CAVF,CADF;AAwDD,KA5DA,CADH,CADF;AAiED;;AAEDC,EAAAA,eAAe,GAAG;AAChB,QAAI,KAAK7C,KAAL,CAAWmB,KAAX,CAAiBV,MAAjB,GAA0B,CAA9B,EAAiC;AAC/B,UAAIqC,cAAc,GAAG,EAArB;AACA,UAAIC,UAAJ;AACAjC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKf,KAAL,CAAWmB,KAAvB;AACA,WAAKnB,KAAL,CAAWmB,KAAX,CAAiBjB,OAAjB,CAAyB8C,IAAI,IAAI;AAC/BlC,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBiC,IAAnB;AACA,YAAIC,KAAK,GAAGD,IAAI,CAACV,KAAL,CAAW7B,MAAvB;AACAqC,QAAAA,cAAc,CAACI,IAAf,CAAoBD,KAApB;AACD,OAJD;AAKAF,MAAAA,UAAU,GAAGD,cAAc,CAACK,MAAf,CAAsB,CAACC,KAAD,EAAQH,KAAR,KAAkBG,KAAK,GAAGH,KAAhD,CAAb,CAT+B,CAU/B;;AACA,aACE,oBAAC,IAAD,CAAM,MAAN;AAAa,QAAA,KAAK,EAAEpF,YAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,EAAE,EAAC,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAEE,oBAAC,MAAD;AAAQ,QAAA,EAAE,EAAC,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAiBkF,UAAjB,CAFF,EAGE,oBAAC,KAAD;AACE,QAAA,KAAK,EAAEzE,UADT;AAEE,QAAA,IAAI,EAAC,OAFP;AAGE,QAAA,OAAO,EAAC,OAHV;AAIE,QAAA,GAAG,EAAC,qQAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,CADF;AAYD,KAvBD,MAuBO;AACL,aAAO,IAAP;AACD;AACF;;AACD+E,EAAAA,MAAM,GAAG;AAAA,yBAQH,KAAKrE,KARF;AAAA,UAELC,MAFK,gBAELA,MAFK;AAAA,UAGLC,IAHK,gBAGLA,IAHK;AAAA,UAILC,SAJK,gBAILA,SAJK;AAAA,UAKLE,cALK,gBAKLA,cALK;AAAA,UAMLC,mBANK,gBAMLA,mBANK;AAAA,UAOLC,iBAPK,gBAOLA,iBAPK,EASP;;AACAuB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAK/B,KAAjB;AACA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKsE,iBADR,CADF;AAOD;;AAjQ+B;;AAoQlC,MAAMC,eAAe,GAAGvE,KAAK,IAAI;AAC/B,SAAO;AACL+C,IAAAA,IAAI,EAAE/C,KAAK,CAAC+C,IADP;AAELZ,IAAAA,KAAK,EAAEnC,KAAK,CAACmC,KAFR;AAGLlB,IAAAA,iBAAiB,EAAEjB,KAAK,CAACiB,iBAHpB;AAILuD,IAAAA,OAAO,EAAExE,KAAK,CAACwE;AAJV,GAAP;AAMD,CAPD,C,CASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAerG,OAAO,CACpBoG,eADoB,EAEpB;AAAEhG,EAAAA,UAAF;AAAcC,EAAAA,kBAAd;AAAkCC,EAAAA,OAAlC;AAA2CC,EAAAA;AAA3C,CAFoB,CAAP,CAGbN,UAAU,CAAC2B,SAAD,CAHG,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Grid,\n  Image,\n  Card,\n  Table,\n  Icon,\n  Confirm,\n  Button,\n  Modal,\n  Form,\n  Header\n} from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport _ from \"lodash\";\nimport Navbar from \"./Navbar\";\nimport {\n  deleteList,\n  thunkFetchListById,\n  addList,\n  clearMessage\n} from \"../actions\";\n\nconst uuidv1 = require(\"uuid/v1\");\n\nconst styleMetrics = {\n  borderWidth: \"2px\",\n  // marginRight: '30px',\n  borderRadius: \"10px\",\n  borderColor: \"#CECFD0\",\n  borderStyle: \"solid\",\n  margin: \"20px\",\n  padding: \"20px\",\n  // width: \"10px\",\n  height: \"150px\",\n  boxShadow: \"10px 10px 15px -6px rgba(67,66,93,0.68)\"\n  // padding: \"20px\"\n};\n\nconst styleImage = {\n  position: \"relative\",\n  top: \"-40px\",\n  opacity: 0.8\n};\n\nconst styleRow = {\n  top: \"70px\",\n  margin: \"20px\",\n  paddingRight: \"120px\",\n  paddingLeft: \"120px\",\n  marginBottom: \"40px\",\n  position: \"relative\",\n  textAlign: \"left\"\n};\n\nclass Dashboard extends Component {\n  // UPDATE DATA WITH LISTS\n  state = {\n    column: null,\n    data: [],\n    direction: null,\n    modalShow: false,\n    totalLeadCount: 0,\n    totalMeetingsBooked: 0,\n    totalNotContacted: 0,\n    newListName: \"\"\n  };\n\n  componentDidMount() {\n    // this.formattedListArray();\n    // this.countTotalLeads();\n    this.countMeetingsBooked();\n    this.countNotContacted();\n  }\n\n  show = dimmer => this.setState({ dimmer, modalShow: true });\n  handleConfirmModal = () => this.setState({ modalShow: false });\n  handleCancelModal = () => {\n    this.setState({ modalShow: false });\n    // let newArray = this.state.data.filter(data => data.id !== id);\n    // this.setState({ data: newArray });\n    // this.props.deleteList(id);\n  };\n\n  // formattedListArray = () => {\n  //   // if (this.props.lists.length) {\n  //   let array = [];\n  //   this.props.lists.forEach(list => {\n  //     let date = new Date(list.created_at);\n  //     let dateString = date.toDateString();\n  //     array.push({\n  //       id: list.id,\n  //       name: list.name,\n  //       date: dateString,\n  //       leadCount: list.leads.length\n  //     });\n  //   });\n  //   this.setState({ data: array });\n  //   // return array\n  // };\n\n  // countTotalLeads = () => {\n  //   if (this.props.lists) {\n  //     let leadCountArray = [];\n  //     let totalLeads;\n  //     console.log(this.props.lists);\n  //     this.props.lists.forEach(list => {\n  //       let count = list.leads.length;\n  //       leadCountArray.push(count);\n  //     });\n  //     totalLeads = leadCountArray.reduce((total, count) => total + count);\n  //     this.setState({ totalLeadCount: totalLeads });\n  //   } else {\n  //     return null;\n  //   }\n  // };\n\n  countMeetingsBooked = () => {\n    let meetingsBookedCount = 0;\n    if (this.props.listWithLeadNotes) {\n      this.props.listWithLeadNotes.forEach(lead => {\n        lead.leadnotes.forEach(leadnote => {\n          if (leadnote.status === \"Meeting booked\") {\n            meetingsBookedCount += 1;\n          }\n        });\n      });\n      this.setState({ totalMeetingsBooked: meetingsBookedCount });\n    } else {\n      return null;\n    }\n  };\n\n  countNotContacted = () => {\n    let notContacted = 0;\n    // let testArray = []\n    if (this.props.listWithLeadNotes) {\n      this.props.listWithLeadNotes.forEach(lead => {\n        if (lead.leadnotes.length < 1) {\n          notContacted += 1;\n        }\n      });\n      this.setState({ totalNotContacted: notContacted });\n    } else {\n      return null;\n    }\n  };\n\n  handleConfirm = (event, id) => {\n    // let newArray = this.props.lists.filter(list => list.id !== id);\n    this.setState({ modalShow: false });\n    this.props.deleteList(id);\n  };\n\n  handleRowClick = id => {\n    console.log(\"row clicked\", id);\n    this.props.thunkFetchListById(id, this.props.history);\n  };\n\n  handleSort = clickedColumn => () => {\n    const { column, direction } = this.state;\n    const data = this.props.lists\n\n    if (column !== clickedColumn) {\n      this.setState({\n        column: clickedColumn,\n        data: _.sortBy(data, [clickedColumn]),\n        direction: \"ascending\"\n      });\n\n      return;\n    }\n\n    this.setState({\n      data: this.props.lists.reverse(),\n      direction: direction === \"ascending\" ? \"descending\" : \"ascending\"\n    });\n  };\n\n  handleChange = e => {\n    const targetValue = e.target.value;\n    const targetName = e.target.name;\n    this.setState({ [targetName]: targetValue });\n  };\n\n  handleSubmit = () => {\n    const { newListName } = this.state;\n    const userId = this.props.auth.user.id;\n    this.handleCancelModal()\n    this.props.clearMessage();\n    this.props.addList(newListName, userId);\n  };\n\n  handleClearMessage = () => {\n    this.props.clearMessage();\n  };\n\n  renderListBody() {\n    console.log(\"asfd\", this.props.lists);\n    return (\n      <Table.Body>\n        {_.map(this.props.lists, ({ id, name, created_at, leads }) => {\n          let dateString = new Date(created_at).toDateString();\n          let leadCount = leads.length;\n          // let dateString = date\n          return (\n            <Table.Row textAlign=\"center\" key={uuidv1()}>\n              <Table.Cell onClick={() => this.handleRowClick(id)}>\n                {name}\n              </Table.Cell>\n              <Table.Cell onClick={() => this.handleRowClick(id)}>\n                {leadCount}\n              </Table.Cell>\n              <Table.Cell onClick={() => this.handleRowClick(id)}>\n                {dateString}\n              </Table.Cell>\n              <Table.Cell>\n                <Modal\n                  closeIcon\n                  size=\"mini\"\n                  trigger={\n                    <Icon\n                      name={\"trash alternate outline\"}\n                      name=\"trash alternate outline\"\n                      size=\"large\"\n                    />\n                  }\n                >\n                  <Modal.Header>Delete List</Modal.Header>\n                  <Modal.Content>\n                    <p>Are you sure you want to delete this list?</p>\n                  </Modal.Content>\n                  <Modal.Actions>\n                    <Button\n                      style={{\n                        borderRadius: \"30px\",\n                        color: \"white\",\n                        backgroundColor: \"#6200EE\"\n                      }}\n                      onClick={this.handleCancelModal}\n                      basic\n                      color=\"violet\"\n                    >\n                      No\n                    </Button>\n                    <Button\n                      onClick={event => this.handleConfirm(event, id)}\n                      // icon=\"checkmark\"\n                      // labelPosition=\"right\"\n                      content=\"Yes\"\n                      style={{\n                        borderRadius: \"30px\",\n                        color: \"white\",\n                        backgroundColor: \"#03DAC6\"\n                      }}\n                    />\n                  </Modal.Actions>\n                </Modal>\n              </Table.Cell>\n            </Table.Row>\n          );\n        })}\n      </Table.Body>\n    );\n  }\n\n  renderLeadCount() {\n    if (this.props.lists.length > 0) {\n      let leadCountArray = [];\n      let totalLeads;\n      console.log(this.props.lists);\n      this.props.lists.forEach(list => {\n        console.log(\"ist\", list);\n        let count = list.leads.length;\n        leadCountArray.push(count);\n      });\n      totalLeads = leadCountArray.reduce((total, count) => total + count);\n      // this.setState({ totalLeadCount: totalLeads });\n      return (\n        <Grid.Column style={styleMetrics}>\n          <Header as=\"h2\">Total Leads</Header>\n          <Header as=\"h2\">{totalLeads}</Header>\n          <Image\n            style={styleImage}\n            size=\"small\"\n            floated=\"right\"\n            src=\"https://scontent-ort2-2.xx.fbcdn.net/v/t1.15752-9/71338480_839476829779627_88982982114672640_n.png?_nc_cat=103&_nc_oc=AQk-PoFytrGO-egRH0bNhdK77YgmvNvozJbUsZvn9xAPPpjioM-SRk6hyr3rXfVVq2Y&_nc_ht=scontent-ort2-2.xx&oh=c1bc858aa386c365cae63c3eea610b9e&oe=5DF88CFF\"\n          />\n        </Grid.Column>\n      );\n    } else {\n      return null;\n    }\n  }\n  render() {\n    const {\n      column,\n      data,\n      direction,\n      totalLeadCount,\n      totalMeetingsBooked,\n      totalNotContacted\n    } = this.state;\n    // console.log(this.props.lists)\n    console.log(this.state);\n    return (\n      <div>\n        {this.renderMetricCards}\n        {/* METRIC CARDS */}\n        \n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    lists: state.lists,\n    listWithLeadNotes: state.listWithLeadNotes,\n    message: state.message\n  };\n};\n\n// const mapDispatchToProps = dispatch => {\n//   return {\n//     deleteList: id => {\n//       dispatch(deleteList(id));\n//     },\n//     thunkFetchListById: (id, history) => {\n//       dispatch(thunkFetchListById(id, history));\n//     }\n//   };\n// };\n\nexport default connect(\n  mapStateToProps,\n  { deleteList, thunkFetchListById, addList, clearMessage }\n)(withRouter(Dashboard));\n"]},"metadata":{},"sourceType":"module"}