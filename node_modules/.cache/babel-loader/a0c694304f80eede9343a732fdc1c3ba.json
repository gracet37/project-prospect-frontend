{"ast":null,"code":"export const FETCH_CATEGORIES = \"FETCH_CATEGORIES\";\nexport const START_FETCH_CATEGORIES = \"START_FETCH_CATEGORIES\";\nexport const START_FETCH_LEADS = \"START_FETCH_LEADS\";\nexport const FETCH_LEADS = \"FETCH_LEADS\";\nexport const START_FETCH_LISTS = \"FETCH_LISTS\";\nexport const FETCH_LISTS = \"FETCH_LISTS\";\nexport const ADD_LIST = \"ADD_LIST\";\nexport const LOGIN_USER = \"LOGIN_USER\";\nexport const LOGOUT_USER = \"LOGOUT_USER\";\n\nconst uuidv1 = require('uuid/v1'); // LOGIN\n\n\nexport function loginUser(user) {\n  return {\n    type: \"LOGIN_USER\",\n    user\n  };\n}\nexport function logoutUser() {\n  return {\n    type: \"LOGOUT_USER\"\n  };\n}\nexport function currentUser(history) {\n  return dispatch => {\n    // const token = localStorage.token;\n    const reqObj = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: \"Bearer \".concat(localStorage.token)\n      },\n      body: JSON.stringify(localStorage.token)\n    };\n    return fetch('http://localhost:3000/api/v1/current_user', reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        //handle error\n        console.log(\"currentUser error\", data.error);\n      } else {\n        dispatch(loginUser({\n          user: data.user\n        }));\n        history.push('/search');\n      }\n    });\n  };\n}\nexport function login(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch('http://localhost:3000/api/v1/login', reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        //handle error case\n        console.log(data.error);\n      } else {\n        console.log(\"fetch login\", data);\n        localStorage.token = data.token;\n        dispatch(loginUser(data.user));\n        history.push('/search');\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function registerUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch('http://localhost:3000/api/v1/auth', reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        //handle error case\n        console.log(data.error);\n      } else {\n        localStorage.token = data.token;\n        dispatch(loginUser(data.user));\n        history.push('/search');\n      }\n    });\n  };\n} ////LOGIN\n\nexport function thunkFetchCategories() {\n  return function (dispatch) {\n    dispatch({\n      type: START_FETCH_CATEGORIES\n    });\n    fetch(\"http://localhost:3000/api/v1/categories\").then(res => res.json()).then(data => {\n      dispatch({\n        type: FETCH_CATEGORIES,\n        categories: data\n      });\n    });\n  };\n}\nexport function thunkFetchLists(id) {\n  return function (dispatch) {\n    dispatch({\n      type: START_FETCH_LISTS\n    });\n    fetch(\"http://localhost:3000/api/v1/lists/\".concat(id)).then(res => res.json()).then(data => {\n      dispatch({\n        type: FETCH_LISTS,\n        lists: data\n      });\n    });\n  };\n} // creating a new lead instance of the one the user saved and creating the association between list and lead\n\nexport function addLead(leadObj, company, website, listId, newListName, userId) {\n  return function (dispatch) {\n    dispatch({\n      type: START_FETCH_LEADS\n    });\n    fetch(\"http://localhost:3000/api/v1/leads\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": 'application/json',\n        \"Accept\": 'application/json'\n      },\n      body: JSON.stringify({\n        first_name: leadObj.first_name,\n        last_name: leadObj.last_name,\n        email: leadObj.value,\n        phone_number: leadObj.phone_number,\n        position: leadObj.position,\n        confidence_score: leadObj.confidence,\n        company: company,\n        website: website\n      })\n    }).then(res => res.json()).then(data => {\n      if (listId) {\n        fetch(\"http://localhost:3000/api/v1/leadlists\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": 'application/json',\n            \"Accept\": 'application/json'\n          },\n          body: JSON.stringify({\n            list_id: listId,\n            lead_id: data.id\n          })\n        }).catch(err => console.log(err));\n      } else {\n        fetch(\"http://localhost:3000/api/v1/lists\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": 'application/json',\n            \"Accept\": 'application/json'\n          },\n          body: JSON.stringify({\n            name: newListName,\n            user_id: userId\n          })\n        }).then(res => res.json()).then(data => console.log(data)).catch(err => console.log(err));\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function addList(listName) {\n  return function (dispatch) {\n    fetch(\"http://localhost:3000/api/v1/lists\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": 'application/json',\n        \"Accept\": 'application/json'\n      },\n      body: JSON.stringify({\n        name: listName\n      })\n    }).then(res => res.json()).then(data => {\n      dispatch({\n        type: ADD_LIST,\n        lists: data\n      });\n    }).catch(err => console.log(err));\n  };\n}\nexport function thunkFetchLeads(domainName, history) {\n  return function (dispatch) {\n    dispatch({\n      type: START_FETCH_LEADS\n    });\n    fetch(\"https://api.hunter.io/v2/domain-search?domain=\".concat(domainName, \"&limit=10&api_key=7ca084937e5e049696b7bb64c10366c3d077c650\")).then(res => res.json()).then(result => {\n      dispatch({\n        type: FETCH_LEADS,\n        id: uuidv1(),\n        leads: result.data\n      });\n      history.push('/results');\n    }); // ! ASK FOR HELP HERE ////\n    // .then(data => {\n    //   // const dataArray = data[0];\n    //   fetch(\"http://localhost:3000/api/v1/leads\", {\n    //     method: \"POST\",\n    //     headers: {\n    //       \"Content-Type\": \"application/json\",\n    //       Accept: \"application/json\"\n    //     },\n    //     body: JSON.stringify({data})\n    //   }).then(res => res.json())\n    //   .then(console.log)\n    //   .catch(err => console.log(err));\n    // });\n  };\n} // .then(console.log\n// const dataArray = data[0];\n// const leadData = dataArray.emails.map(lead => {\n//   return (\n//     first_name: lead.first_name,\n//     last_name: lead.last_name,\n//     confidence_score: lead.confidence,\n//     last_name: params[:last_name],\n//     phone_number: params[:phone_number],\n//     position: params[:position],\n//     email: params[:value],\n//     website: params[:website]\n//   )\n// })\n//   fetch(\"http://localhost:3000/api/v1/leads\", {\n//     method: \"POST\",\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//       \"Accept\": \"application/json\"\n//     },\n//     body: JSON.stringify({\n//       confidence_score:\n//       first_name:\n//       confidence_score: params[:confidence],\n//       first_name: params[:first_name],\n//       last_name: params[:last_name],\n//       linkedin: params[:linkedin],\n//       phone_number: params[:phone_number],\n//       position: params[:position],\n//       email: params[:value],\n//       website: params[:website]\n//     })\n//   })\n// })\n// .then(result => {\n//   dispatch({ type: FETCH_LEADS, leads: result.data })\n//   history.push('/results')\n// });\n// handleSubmit = () => {\n//   // ACTION - QUERYSEARCH\n//   const domainName = this.state.searchParam\n//   hunter.domainSearch(\n//     {domain: domainName},\n//     function(err, body) {\n//       if (err) {\n//         console.log(err);\n//       } else {\n//         // Will contain same body as the raw API call\n//         console.log(body);\n//       }\n//     }\n//   );\n// }","map":{"version":3,"sources":["/Users/gracetan/Development/module-projects/module-five-project/project-prospect-frontend/src/actions/index.js"],"names":["FETCH_CATEGORIES","START_FETCH_CATEGORIES","START_FETCH_LEADS","FETCH_LEADS","START_FETCH_LISTS","FETCH_LISTS","ADD_LIST","LOGIN_USER","LOGOUT_USER","uuidv1","require","loginUser","user","type","logoutUser","currentUser","history","dispatch","reqObj","method","headers","Authorization","localStorage","token","body","JSON","stringify","fetch","then","resp","json","data","error","console","log","push","login","formData","catch","err","registerUser","thunkFetchCategories","res","categories","thunkFetchLists","id","lists","addLead","leadObj","company","website","listId","newListName","userId","first_name","last_name","email","value","phone_number","position","confidence_score","confidence","list_id","lead_id","name","user_id","addList","listName","thunkFetchLeads","domainName","result","leads"],"mappings":"AAAA,OAAO,MAAMA,gBAAgB,GAAG,kBAAzB;AACP,OAAO,MAAMC,sBAAsB,GAAG,wBAA/B;AACP,OAAO,MAAMC,iBAAiB,GAAG,mBAA1B;AACP,OAAO,MAAMC,WAAW,GAAG,aAApB;AACP,OAAO,MAAMC,iBAAiB,GAAG,aAA1B;AACP,OAAO,MAAMC,WAAW,GAAG,aAApB;AACP,OAAO,MAAMC,QAAQ,GAAG,UAAjB;AACP,OAAO,MAAMC,UAAU,GAAG,YAAnB;AACP,OAAO,MAAMC,WAAW,GAAG,aAApB;;AAEP,MAAMC,MAAM,GAAGC,OAAO,CAAC,SAAD,CAAtB,C,CAEA;;;AAEA,OAAO,SAASC,SAAT,CAAmBC,IAAnB,EAAyB;AAC9B,SAAO;AACLC,IAAAA,IAAI,EAAE,YADD;AAELD,IAAAA;AAFK,GAAP;AAID;AAED,OAAO,SAASE,UAAT,GAAsB;AAC3B,SAAO;AACLD,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD;AAED,OAAO,SAASE,WAAT,CAAqBC,OAArB,EAA8B;AACnC,SAAQC,QAAD,IAAc;AACnB;AACA,UAAMC,MAAM,GAAG;AACbC,MAAAA,MAAM,EAAE,MADK;AAEbC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,aAAa,mBAAYC,YAAY,CAACC,KAAzB;AAFN,OAFI;AAMbC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeJ,YAAY,CAACC,KAA5B;AANO,KAAf;AASA,WAAOI,KAAK,CAAC,2CAAD,EAA8CT,MAA9C,CAAL,CACJU,IADI,CACCC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADT,EAEJF,IAFI,CAECG,IAAI,IAAI;AACZ,UAAIA,IAAI,CAACC,KAAT,EAAgB;AACd;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCH,IAAI,CAACC,KAAtC;AACD,OAHD,MAGO;AACLf,QAAAA,QAAQ,CAACN,SAAS,CAAC;AAACC,UAAAA,IAAI,EAAEmB,IAAI,CAACnB;AAAZ,SAAD,CAAV,CAAR;AACAI,QAAAA,OAAO,CAACmB,IAAR,CAAa,SAAb;AACD;AACF,KAVI,CAAP;AAWD,GAtBD;AAuBD;AAED,OAAO,SAASC,KAAT,CAAeC,QAAf,EAAyBrB,OAAzB,EAAkC;AACvC,SAAQC,QAAD,IAAc;AACnB,UAAMC,MAAM,GAAG;AACbC,MAAAA,MAAM,EAAE,MADK;AAEbC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAFI;AAGbI,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeW,QAAf;AAHO,KAAf;AAMA,WAAOV,KAAK,CAAC,oCAAD,EAAuCT,MAAvC,CAAL,CACJU,IADI,CACCC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADT,EAEJF,IAFI,CAECG,IAAI,IAAI;AACZ,UAAIA,IAAI,CAACC,KAAT,EAAe;AACb;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,KAAjB;AACD,OAHD,MAGO;AACLC,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BH,IAA3B;AACAT,QAAAA,YAAY,CAACC,KAAb,GAAqBQ,IAAI,CAACR,KAA1B;AACAN,QAAAA,QAAQ,CAACN,SAAS,CAACoB,IAAI,CAACnB,IAAN,CAAV,CAAR;AACAI,QAAAA,OAAO,CAACmB,IAAR,CAAa,SAAb;AACD;AACF,KAZI,EAaJG,KAbI,CAaEC,GAAG,IAAIN,OAAO,CAACC,GAAR,CAAYK,GAAZ,CAbT,CAAP;AAcD,GArBD;AAsBD;AAED,OAAO,SAASC,YAAT,CAAsBH,QAAtB,EAAgCrB,OAAhC,EAAyC;AAC9C,SAAQC,QAAD,IAAc;AACnB,UAAMC,MAAM,GAAG;AACbC,MAAAA,MAAM,EAAE,MADK;AAEbC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAFI;AAGbI,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeW,QAAf;AAHO,KAAf;AAMA,WAAOV,KAAK,CAAC,mCAAD,EAAsCT,MAAtC,CAAL,CACJU,IADI,CACCC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADT,EAEJF,IAFI,CAECG,IAAI,IAAI;AACZ,UAAIA,IAAI,CAACC,KAAT,EAAe;AACb;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,KAAjB;AACD,OAHD,MAGO;AACLV,QAAAA,YAAY,CAACC,KAAb,GAAqBQ,IAAI,CAACR,KAA1B;AACAN,QAAAA,QAAQ,CAACN,SAAS,CAAEoB,IAAI,CAACnB,IAAP,CAAV,CAAR;AACAI,QAAAA,OAAO,CAACmB,IAAR,CAAa,SAAb;AACD;AACF,KAXI,CAAP;AAYD,GAnBD;AAoBD,C,CAED;;AAEA,OAAO,SAASM,oBAAT,GAAgC;AACrC,SAAO,UAASxB,QAAT,EAAmB;AACxBA,IAAAA,QAAQ,CAAC;AAAEJ,MAAAA,IAAI,EAAEZ;AAAR,KAAD,CAAR;AAEA0B,IAAAA,KAAK,CAAC,yCAAD,CAAL,CACGC,IADH,CACQc,GAAG,IAAIA,GAAG,CAACZ,IAAJ,EADf,EAEGF,IAFH,CAEQG,IAAI,IAAI;AACZd,MAAAA,QAAQ,CAAC;AAAEJ,QAAAA,IAAI,EAAEb,gBAAR;AAA0B2C,QAAAA,UAAU,EAAEZ;AAAtC,OAAD,CAAR;AACD,KAJH;AAKD,GARD;AASD;AAED,OAAO,SAASa,eAAT,CAAyBC,EAAzB,EAA6B;AAClC,SAAO,UAAS5B,QAAT,EAAmB;AACxBA,IAAAA,QAAQ,CAAC;AAAEJ,MAAAA,IAAI,EAAET;AAAR,KAAD,CAAR;AAEAuB,IAAAA,KAAK,8CAAuCkB,EAAvC,EAAL,CACGjB,IADH,CACQc,GAAG,IAAIA,GAAG,CAACZ,IAAJ,EADf,EAEGF,IAFH,CAEQG,IAAI,IAAI;AACZd,MAAAA,QAAQ,CAAC;AAAEJ,QAAAA,IAAI,EAAER,WAAR;AAAqByC,QAAAA,KAAK,EAAEf;AAA5B,OAAD,CAAR;AACD,KAJH;AAKD,GARD;AASD,C,CACD;;AACA,OAAO,SAASgB,OAAT,CAAiBC,OAAjB,EAA0BC,OAA1B,EAAmCC,OAAnC,EAA4CC,MAA5C,EAAoDC,WAApD,EAAiEC,MAAjE,EAAyE;AAC9E,SAAO,UAASpC,QAAT,EAAmB;AACxBA,IAAAA,QAAQ,CAAC;AAAEJ,MAAAA,IAAI,EAAEX;AAAR,KAAD,CAAR;AAEAyB,IAAAA,KAAK,CAAC,oCAAD,EAAuC;AAC1CR,MAAAA,MAAM,EAAE,MADkC;AAE1CC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,kBAAU;AAFH,OAFiC;AAM1CI,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB4B,QAAAA,UAAU,EAAEN,OAAO,CAACM,UADD;AAEnBC,QAAAA,SAAS,EAAEP,OAAO,CAACO,SAFA;AAGnBC,QAAAA,KAAK,EAAER,OAAO,CAACS,KAHI;AAInBC,QAAAA,YAAY,EAAEV,OAAO,CAACU,YAJH;AAKnBC,QAAAA,QAAQ,EAAEX,OAAO,CAACW,QALC;AAMnBC,QAAAA,gBAAgB,EAAEZ,OAAO,CAACa,UANP;AAOnBZ,QAAAA,OAAO,EAAEA,OAPU;AAQnBC,QAAAA,OAAO,EAAEA;AARU,OAAf;AANoC,KAAvC,CAAL,CAiBGtB,IAjBH,CAiBQc,GAAG,IAAIA,GAAG,CAACZ,IAAJ,EAjBf,EAkBGF,IAlBH,CAkBQG,IAAI,IAAI;AACZ,UAAIoB,MAAJ,EAAY;AACZxB,QAAAA,KAAK,CAAC,wCAAD,EAA2C;AAC9CR,UAAAA,MAAM,EAAE,MADsC;AAE9CC,UAAAA,OAAO,EAAE;AACP,4BAAgB,kBADT;AAEP,sBAAU;AAFH,WAFqC;AAM9CI,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBoC,YAAAA,OAAO,EAAEX,MADU;AAEnBY,YAAAA,OAAO,EAAEhC,IAAI,CAACc;AAFK,WAAf;AANwC,SAA3C,CAAL,CAUGP,KAVH,CAUSC,GAAG,IAAIN,OAAO,CAACC,GAAR,CAAYK,GAAZ,CAVhB;AAWD,OAZC,MAYK;AACLZ,QAAAA,KAAK,CAAC,oCAAD,EAAuC;AAC1CR,UAAAA,MAAM,EAAE,MADkC;AAE1CC,UAAAA,OAAO,EAAE;AACP,4BAAgB,kBADT;AAEP,sBAAU;AAFH,WAFiC;AAM1CI,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBsC,YAAAA,IAAI,EAAEZ,WADa;AAEnBa,YAAAA,OAAO,EAAEZ;AAFU,WAAf;AANoC,SAAvC,CAAL,CAWCzB,IAXD,CAWMc,GAAG,IAAIA,GAAG,CAACZ,IAAJ,EAXb,EAYCF,IAZD,CAYMG,IAAI,IAAIE,OAAO,CAACC,GAAR,CAAYH,IAAZ,CAZd,EAaCO,KAbD,CAaOC,GAAG,IAAIN,OAAO,CAACC,GAAR,CAAYK,GAAZ,CAbd;AAcD;AACA,KA/CH,EAgDGD,KAhDH,CAgDSC,GAAG,IAAIN,OAAO,CAACC,GAAR,CAAYK,GAAZ,CAhDhB;AAiDD,GApDD;AAqDD;AAED,OAAO,SAAS2B,OAAT,CAAiBC,QAAjB,EAA2B;AAChC,SAAO,UAASlD,QAAT,EAAmB;AAExBU,IAAAA,KAAK,CAAC,oCAAD,EAAuC;AAC1CR,MAAAA,MAAM,EAAE,MADkC;AAE1CC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,kBAAU;AAFH,OAFiC;AAM1CI,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBsC,QAAAA,IAAI,EAAEG;AADa,OAAf;AANoC,KAAvC,CAAL,CAUGvC,IAVH,CAUQc,GAAG,IAAIA,GAAG,CAACZ,IAAJ,EAVf,EAWGF,IAXH,CAWQG,IAAI,IAAI;AACZd,MAAAA,QAAQ,CAAC;AAAEJ,QAAAA,IAAI,EAAEP,QAAR;AAAkBwC,QAAAA,KAAK,EAAEf;AAAzB,OAAD,CAAR;AACD,KAbH,EAcGO,KAdH,CAcSC,GAAG,IAAIN,OAAO,CAACC,GAAR,CAAYK,GAAZ,CAdhB;AAeD,GAjBD;AAkBD;AAED,OAAO,SAAS6B,eAAT,CAAyBC,UAAzB,EAAqCrD,OAArC,EAA8C;AACnD,SAAO,UAASC,QAAT,EAAmB;AACxBA,IAAAA,QAAQ,CAAC;AAAEJ,MAAAA,IAAI,EAAEX;AAAR,KAAD,CAAR;AAEAyB,IAAAA,KAAK,yDAC8C0C,UAD9C,gEAAL,CAGGzC,IAHH,CAGQc,GAAG,IAAIA,GAAG,CAACZ,IAAJ,EAHf,EAIGF,IAJH,CAIQ0C,MAAM,IAAI;AACdrD,MAAAA,QAAQ,CAAC;AAAEJ,QAAAA,IAAI,EAAEV,WAAR;AAAqB0C,QAAAA,EAAE,EAAEpC,MAAM,EAA/B;AAAmC8D,QAAAA,KAAK,EAAED,MAAM,CAACvC;AAAjD,OAAD,CAAR;AACAf,MAAAA,OAAO,CAACmB,IAAR,CAAa,UAAb;AACD,KAPH,EAHwB,CAatB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,GA3BD;AA4BD,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["export const FETCH_CATEGORIES = \"FETCH_CATEGORIES\";\nexport const START_FETCH_CATEGORIES = \"START_FETCH_CATEGORIES\";\nexport const START_FETCH_LEADS = \"START_FETCH_LEADS\";\nexport const FETCH_LEADS = \"FETCH_LEADS\";\nexport const START_FETCH_LISTS = \"FETCH_LISTS\";\nexport const FETCH_LISTS = \"FETCH_LISTS\";\nexport const ADD_LIST = \"ADD_LIST\";\nexport const LOGIN_USER = \"LOGIN_USER\";\nexport const LOGOUT_USER = \"LOGOUT_USER\";\n\nconst uuidv1 = require('uuid/v1')\n\n// LOGIN\n\nexport function loginUser(user) {\n  return {\n    type: \"LOGIN_USER\",\n    user\n  }\n}\n\nexport function logoutUser() {\n  return {\n    type: \"LOGOUT_USER\"\n  }\n}\n\nexport function currentUser(history) {\n  return (dispatch) => {\n    // const token = localStorage.token;\n    const reqObj = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${localStorage.token}`\n      },\n      body: JSON.stringify(localStorage.token)\n    }\n\n    return fetch('http://localhost:3000/api/v1/current_user', reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          //handle error\n          console.log(\"currentUser error\", data.error)\n        } else {\n          dispatch(loginUser({user: data.user}))\n          history.push('/search')\n        }\n      })\n  }\n}\n\nexport function login(formData, history) {\n  return (dispatch) => {\n    const reqObj = {\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify(formData)\n    }\n\n    return fetch('http://localhost:3000/api/v1/login', reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error){\n          //handle error case\n          console.log(data.error)\n        } else {\n          console.log(\"fetch login\", data)\n          localStorage.token = data.token\n          dispatch(loginUser(data.user))\n          history.push('/search')\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function registerUser(formData, history) {\n  return (dispatch) => {\n    const reqObj = {\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify(formData)\n    }\n\n    return fetch('http://localhost:3000/api/v1/auth', reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error){\n          //handle error case\n          console.log(data.error)\n        } else {\n          localStorage.token = data.token\n          dispatch(loginUser( data.user ))\n          history.push('/search')\n        }\n      })\n  }\n}\n\n////LOGIN\n\nexport function thunkFetchCategories() {\n  return function(dispatch) {\n    dispatch({ type: START_FETCH_CATEGORIES });\n\n    fetch(\"http://localhost:3000/api/v1/categories\")\n      .then(res => res.json())\n      .then(data => {\n        dispatch({ type: FETCH_CATEGORIES, categories: data });\n      }); \n  };\n}\n\nexport function thunkFetchLists(id) {\n  return function(dispatch) {\n    dispatch({ type: START_FETCH_LISTS });\n\n    fetch(`http://localhost:3000/api/v1/lists/${id}`)\n      .then(res => res.json())\n      .then(data => {\n        dispatch({ type: FETCH_LISTS, lists: data });\n      }); \n  };\n}\n// creating a new lead instance of the one the user saved and creating the association between list and lead\nexport function addLead(leadObj, company, website, listId, newListName, userId) {\n  return function(dispatch) {\n    dispatch({ type: START_FETCH_LEADS });\n\n    fetch(\"http://localhost:3000/api/v1/leads\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": 'application/json',\n        \"Accept\": 'application/json'\n      },\n      body: JSON.stringify({\n        first_name: leadObj.first_name,\n        last_name: leadObj.last_name, \n        email: leadObj.value,\n        phone_number: leadObj.phone_number,\n        position: leadObj.position,\n        confidence_score: leadObj.confidence,\n        company: company,\n        website: website\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (listId) { \n        fetch(\"http://localhost:3000/api/v1/leadlists\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": 'application/json',\n            \"Accept\": 'application/json'\n          },\n          body: JSON.stringify({\n            list_id: listId,\n            lead_id: data.id\n          })\n        }).catch(err => console.log(err));\n      } else { \n        fetch(\"http://localhost:3000/api/v1/lists\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": 'application/json',\n            \"Accept\": 'application/json'\n          },\n          body: JSON.stringify({\n            name: newListName, \n            user_id: userId\n          })\n        })\n        .then(res => res.json())\n        .then(data => console.log(data))\n        .catch(err => console.log(err));\n      }\n      })\n      .catch(err => console.log(err)); \n  };\n}\n\nexport function addList(listName) {\n  return function(dispatch) {\n\n    fetch(\"http://localhost:3000/api/v1/lists\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": 'application/json',\n        \"Accept\": 'application/json'\n      },\n      body: JSON.stringify({\n        name: listName\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        dispatch({ type: ADD_LIST, lists: data})\n      })\n      .catch(err => console.log(err)); \n  };\n}\n\nexport function thunkFetchLeads(domainName, history) {\n  return function(dispatch) {\n    dispatch({ type: START_FETCH_LEADS });\n\n    fetch(\n      `https://api.hunter.io/v2/domain-search?domain=${domainName}&limit=10&api_key=7ca084937e5e049696b7bb64c10366c3d077c650`\n    )\n      .then(res => res.json())\n      .then(result => {\n        dispatch({ type: FETCH_LEADS, id: uuidv1(), leads: result.data })\n        history.push('/results')\n      });\n\n\n      // ! ASK FOR HELP HERE ////\n      // .then(data => {\n      //   // const dataArray = data[0];\n      //   fetch(\"http://localhost:3000/api/v1/leads\", {\n      //     method: \"POST\",\n      //     headers: {\n      //       \"Content-Type\": \"application/json\",\n      //       Accept: \"application/json\"\n      //     },\n      //     body: JSON.stringify({data})\n      //   }).then(res => res.json())\n      //   .then(console.log)\n      //   .catch(err => console.log(err));\n      // });\n  };\n}\n\n// .then(console.log\n// const dataArray = data[0];\n// const leadData = dataArray.emails.map(lead => {\n//   return (\n//     first_name: lead.first_name,\n//     last_name: lead.last_name,\n//     confidence_score: lead.confidence,\n//     last_name: params[:last_name],\n//     phone_number: params[:phone_number],\n//     position: params[:position],\n//     email: params[:value],\n//     website: params[:website]\n//   )\n// })\n//   fetch(\"http://localhost:3000/api/v1/leads\", {\n//     method: \"POST\",\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//       \"Accept\": \"application/json\"\n//     },\n//     body: JSON.stringify({\n//       confidence_score:\n//       first_name:\n//       confidence_score: params[:confidence],\n//       first_name: params[:first_name],\n//       last_name: params[:last_name],\n//       linkedin: params[:linkedin],\n//       phone_number: params[:phone_number],\n//       position: params[:position],\n//       email: params[:value],\n//       website: params[:website]\n//     })\n//   })\n// })\n// .then(result => {\n//   dispatch({ type: FETCH_LEADS, leads: result.data })\n//   history.push('/results')\n// });\n\n// handleSubmit = () => {\n//   // ACTION - QUERYSEARCH\n//   const domainName = this.state.searchParam\n//   hunter.domainSearch(\n//     {domain: domainName},\n//     function(err, body) {\n//       if (err) {\n//         console.log(err);\n//       } else {\n//         // Will contain same body as the raw API call\n//         console.log(body);\n//       }\n//     }\n//   );\n// }\n"]},"metadata":{},"sourceType":"module"}