{"ast":null,"code":"'use strict';\n\nvar hexTable = function () {\n  var array = new Array(256);\n\n  for (var i = 0; i < 256; ++i) {\n    array[i] = '%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase();\n  }\n\n  return array;\n}();\n\nvar has = Object.prototype.hasOwnProperty;\n\nexports.arrayToObject = function (source, options) {\n  var obj = options.plainObjects ? Object.create(null) : {};\n\n  for (var i = 0; i < source.length; ++i) {\n    if (typeof source[i] !== 'undefined') {\n      obj[i] = source[i];\n    }\n  }\n\n  return obj;\n};\n\nexports.merge = function (target, source, options) {\n  if (!source) {\n    return target;\n  }\n\n  if (typeof source !== 'object') {\n    if (Array.isArray(target)) {\n      target.push(source);\n    } else if (typeof target === 'object') {\n      if (options.plainObjects || options.allowPrototypes || !has.call(Object.prototype, source)) {\n        target[source] = true;\n      }\n    } else {\n      return [target, source];\n    }\n\n    return target;\n  }\n\n  if (typeof target !== 'object') {\n    return [target].concat(source);\n  }\n\n  var mergeTarget = target;\n\n  if (Array.isArray(target) && !Array.isArray(source)) {\n    mergeTarget = exports.arrayToObject(target, options);\n  }\n\n  return Object.keys(source).reduce(function (acc, key) {\n    var value = source[key];\n\n    if (has.call(acc, key)) {\n      acc[key] = exports.merge(acc[key], value, options);\n    } else {\n      acc[key] = value;\n    }\n\n    return acc;\n  }, mergeTarget);\n};\n\nexports.decode = function (str) {\n  try {\n    return decodeURIComponent(str.replace(/\\+/g, ' '));\n  } catch (e) {\n    return str;\n  }\n};\n\nexports.encode = function (str) {\n  // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n  // It has been adapted here for stricter adherence to RFC 3986\n  if (str.length === 0) {\n    return str;\n  }\n\n  var string = typeof str === 'string' ? str : String(str);\n  var out = '';\n\n  for (var i = 0; i < string.length; ++i) {\n    var c = string.charCodeAt(i);\n\n    if (c === 0x2D || // -\n    c === 0x2E || // .\n    c === 0x5F || // _\n    c === 0x7E || // ~\n    c >= 0x30 && c <= 0x39 || // 0-9\n    c >= 0x41 && c <= 0x5A || // a-z\n    c >= 0x61 && c <= 0x7A // A-Z\n    ) {\n        out += string.charAt(i);\n        continue;\n      }\n\n    if (c < 0x80) {\n      out = out + hexTable[c];\n      continue;\n    }\n\n    if (c < 0x800) {\n      out = out + (hexTable[0xC0 | c >> 6] + hexTable[0x80 | c & 0x3F]);\n      continue;\n    }\n\n    if (c < 0xD800 || c >= 0xE000) {\n      out = out + (hexTable[0xE0 | c >> 12] + hexTable[0x80 | c >> 6 & 0x3F] + hexTable[0x80 | c & 0x3F]);\n      continue;\n    }\n\n    i += 1;\n    c = 0x10000 + ((c & 0x3FF) << 10 | string.charCodeAt(i) & 0x3FF);\n    out += hexTable[0xF0 | c >> 18] + hexTable[0x80 | c >> 12 & 0x3F] + hexTable[0x80 | c >> 6 & 0x3F] + hexTable[0x80 | c & 0x3F];\n  }\n\n  return out;\n};\n\nexports.compact = function (obj, references) {\n  if (typeof obj !== 'object' || obj === null) {\n    return obj;\n  }\n\n  var refs = references || [];\n  var lookup = refs.indexOf(obj);\n\n  if (lookup !== -1) {\n    return refs[lookup];\n  }\n\n  refs.push(obj);\n\n  if (Array.isArray(obj)) {\n    var compacted = [];\n\n    for (var i = 0; i < obj.length; ++i) {\n      if (obj[i] && typeof obj[i] === 'object') {\n        compacted.push(exports.compact(obj[i], refs));\n      } else if (typeof obj[i] !== 'undefined') {\n        compacted.push(obj[i]);\n      }\n    }\n\n    return compacted;\n  }\n\n  var keys = Object.keys(obj);\n\n  for (var j = 0; j < keys.length; ++j) {\n    var key = keys[j];\n    obj[key] = exports.compact(obj[key], refs);\n  }\n\n  return obj;\n};\n\nexports.isRegExp = function (obj) {\n  return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nexports.isBuffer = function (obj) {\n  if (obj === null || typeof obj === 'undefined') {\n    return false;\n  }\n\n  return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};","map":null,"metadata":{},"sourceType":"script"}